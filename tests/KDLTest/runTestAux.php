<?php
$mediaInfoSample = "

General
Complete name                    : C:\\xampp\htdocs\mvdr6t454m.mov
Format                           : MPEG-4
Format profile                   : QuickTime
Codec ID                         : qt  
File size                        : 66.6MiB 
Duration                         : 2mn 25s
Overall bit rate                 : 3 851 Kbps
Encoded date                     : UTC 2009-08-21 18:45:38
Tagged date                      : UTC 2009-08-21 18:45:40
Writing library                  : Apple QuickTime
com.apple.finalcutstudio.media.u : 7ABA86C3-580D-4364-970F-5C8103CC66C9

Video
ID                               : 1
Format                           : AVC
Format/Info                      : Advanced Video Codec
Format profile                   : Main@L4.0
Format settings, CABAC           : No
Format settings, ReFrames        : 2 frames
Codec ID                         : vp6
Codec ID/Info                    : Advanced Video Coding
Duration                         : 2mn 25s
Bit rate mode                    : Variable
Bit rate                         : 721 Kbps
Width                            : 1 280 pixels
Height                           : 720 pixels
Display aspect ratio             : 16:9
Frame rate mode                  : Constant
Frame rate                       : 29.970 fps
Resolution                       : 24 bits
Colorimetry                      : 4:2:0
Scan type                        : Progressive
Bits/(Pixel*Frame)               : 0.060
Stream size                      : 64.4 MiB (97%)
Encoded date                     : UTC 2009-08-21 18:45:37
Tagged date                      : UTC 2009-08-21 18:45:40

Audio
ID                               : 3
Format                           : AAC
Format/Info                      : Advanced Audio Codec
Format version                   : Version 4
Format profile                   : LC
Format settings, SBR             : No
Codec ID                         : 40
Duration                         : 2mn 25s
Bit rate mode                    : Constant
Bit rate                         : 124 Kbps
Nominal bit rate                 : 128 Kbps
Channel(s)                       : 2 channels
Channel positions                : L R
Sampling rate                    : 48.0 KHz
Resolution                       : 16 bits
Stream size                      : 2.15 MiB (3%)
Encoded date                     : UTC 2009-08-21 18:45:38
Tagged date                      : UTC 2009-08-21 18:45:40

Menu
ID                               : 2
Encoded_Date                     : UTC 2009-08-21 18:45:37
Tagged_Date                      : UTC 2009-08-21 18:45:40
BitRate_Mode                     : CBR

";
$mediaInfoSample2 = 
"

General
Complete name                    : C:\Anatol\Work\Kaltura\Media\1072908.flv
Format                           : Flash Video
File size                        : 1.20 MiB
Duration                         : 2mn 26s
Overall bit rate                 : 69.0 Kbps
Tagging application              : FlixEngineLinux_8.0.15.3_DEMOO (www.on2.com)

Video
Format                           : xvid
Duration                         : 2mn 26s
Bit rate                         : 1400 kbps
Width                            : 640 pixels
Height                           : 480 pixels
Display aspect ratio             : 1.7777777777778
Frame rate                       : 30.000 fps
Bits/(Pixel*Frame)               : 0.000
Stream size                      : 1.41 KiB (0%)

Audio
Format                           : MPEG Audio
Format version                   : Version 1
Format profile                   : Layer 3
Duration                         : 2mn 26s
Bit rate mode                    : Constant
Bit rate                         : 64.0 Kbps
Channel(s)                       : 2 channels
Sampling rate                    : 44.1 KHz
Resolution                       : 16 bits
Video delay                      : 23ms
Stream size                      : 1.11 MiB (93%)
";

$mediaInfoSample3 = 
"
General
Complete name                    : C:\Anatol\Work\Kaltura\Media\0_gz7q5qj6.mov
Format                           : MPEG-4
Format profile                   : QuickTime
Codec ID                         : qt  
File size                        : 13.2 MiB
Duration                         : 1mn 1s
Overall bit rate                 : 1 785 Kbps
Encoded date                     : UTC 2010-01-19 20:17:06
Tagged date                      : UTC 2010-01-19 20:17:07
Writing library                  : Apple QuickTime

Video
ID                               : 1
Format                           : AVC
Format/Info                      : Advanced Video Codec
Format profile                   : Main@L1.3
Format settings, CABAC           : No
Format settings, ReFrames        : 2 frames
Codec ID                         : avc1
Codec ID/Info                    : Advanced Video Coding
Duration                         : 1mn 1s
Bit rate mode                    : Variable
Bit rate                         : 246 Kbps
Width                            : 320 pixels
Height                           : 240 pixels
Display aspect ratio             : 4:3
Frame rate mode                  : Constant
Frame rate                       : 29.970 fps
Resolution                       : 24 bits
Colorimetry                      : 4:2:0
Scan type                        : Progressive
Bits/(Pixel*Frame)               : 0.107
Stream size                      : 1.81 MiB (14%)
Encoded date                     : UTC 2010-01-19 20:16:41
Tagged date                      : UTC 2010-01-19 20:17:07

Audio
ID                               : 2
Format                           : PCM
Format settings, Endianness      : Little
Format settings, Sign            : Signed
Codec ID                         : sowt
Duration                         : 1mn 1s
Bit rate mode                    : Constant
Bit rate                         : 1 536 Kbps
Channel(s)                       : 2 channels
Sampling rate                    : 48.0 KHz
Resolution                       : 16 bits
Stream size                      : 11.3 MiB (86%)
Encoded date                     : UTC 2010-01-19 20:16:42
Tagged date                      : UTC 2010-01-19 20:17:07


";

$mediaInfoSample4 = 
"
General
Complete name                    : C:\Anatol\Work\Kaltura\Media\0_ybws36sj.flv
Format                           : Flash Video
File size                        : 34.3 MiB
Duration                         : 1mn 42s
Overall bit rate                 : 2 808 Kbps

Video
Format                           : VP6
Duration                         : 1mn 42s
Bit rate                         : 2 500 Kbps
Width                            : 1 280 pixels
Height                           : 720 pixels
Display aspect ratio             : 16:9
Frame rate                       : 23.976 fps
Bits/(Pixel*Frame)               : 0.113
Stream size                      : 30.5 MiB (89%)

Audio
Format                           : MPEG Audio
Format version                   : Version 1
Format profile                   : Layer 3
Duration                         : 1mn 42s
Bit rate mode                    : Constant
Bit rate                         : 128 Kbps
Channel(s)                       : 2 channels
Sampling rate                    : 44.1 KHz
Resolution                       : 16 bits
Stream size                      : 1.56 MiB (5%)

";


$mediaInfoSample5 = 
"
General
Complete name                    : /web/storage/s15/content/entry/data/19/111/0_4zt33loq_0_mb4cb32s_1.flv
Format                           : Flash Video
File size                        : 2.76 MiB
Duration                         : 40s 907ms
Overall bit rate                 : 566 Kbps

Video
Format                           : VP6
Duration                         : 40s 907ms
Bit rate                         : 400 Kbps
Width                            : 634 pixels
Height                           : 360 pixels
Display aspect ratio             : 16:9
Frame rate                       : 25.000 fps
Bits/(Pixel*Frame)               : 0.070
Stream size                      : 1.95 MiB (71%)

Audio
Format                           : MPEG Audio
Format version                   : Version 1
Format profile                   : Layer 3
Duration                         : 40s 907ms
Bit rate mode                    : Constant
Bit rate                         : 64.0 Kbps
Channel(s)                       : 1 channel
Sampling rate                    : 44.1 KHz
Resolution                       : 16 bits
Stream size                      : 320 KiB (11%)


";

$mediaInfoSample6 = 
"

General
Complete name                    : /web/storage/r20/content/entry/data/28/703/0_r6qkhpy6_0_4ggd1mmk_1.wmv
Format                           : Windows Media
File size                        : 41.6 MiB
Duration                         : 1h 30mn
Overall bit rate mode            : Variable
Overall bit rate                 : 64.3 Kbps
Maximum Overall bit rate         : 248 Kbps
Encoded date                     : UTC 2010-05-12 11:05:08.484

Video
ID                               : 2
Format                           : VC-1
Format profile                   : MP@HL
Codec ID                         : WMV3
Codec ID/Info                    : Windows Media Video 9
Codec ID/Hint                    : WMV3
Description of the codec         : Windows Media Video 9
Bit rate mode                    : Variable
Bit rate                         : 40.8 Kbps
Width                            : 992 pixels
Height                           : 644 pixels
Display aspect ratio             : 3:2
Frame rate mode                  : Variable
Nominal frame rate               : 15.000 fps
Resolution                       : 8 bits
Scan type                        : Progressive
Language                         : English (US)

Audio
ID                               : 1
Format                           : WMA
Format profile                   : Voice
Codec ID                         : A
Codec ID/Info                    : Windows Media Audio
Description of the codec         : Windows Media Audio 9 Voice -  20 kbps, 22 kHz, mono
Duration                         : 1h 30mn
Bit rate mode                    : Constant
Bit rate                         : 20.0 Kbps
Channel(s)                       : 1 channel
Sampling rate                    : 22.05 KHz
Resolution                       : 16 bits
Stream size                      : 13.0 MiB (31%)
Language                         : English (US)


";

$mediaInfoSample6 = "
General
Complete name                    : /web/storage/r14/content/entry/data/22/992/0_bxziph38_0_rrawa912_1.flv
File size                        : 0.00 Byte

";

class kLog{
	
	public static function log($str)
	{
		echo "$str<br>\n";
	}
	public static function setLogger($obj)
	{
		;
	}
}

class KalturaLog{
	
	public static function log($str)
	{
		echo "$str<br>\n";
	}
	public static function setLogger($obj)
	{
		;
	}
}

class flavorParamsOutput 
{
	const STR_SEPARATOR = "|||" ;
	const KEY_SEPARATOR = "@@@" ; 
	public $command_lines;
/*	
	public static function buildCommandLinesStr(array $command_lines)
	{
		$strArr = array();
		foreach($command_lines as $key => $value)
			$strArr[] = $key . self::KEY_SEPARATOR . $value;
			
		return implode ( self::STR_SEPARATOR , $strArr );
	}
	
	public function getCommandLinesStr()
	{
		$command_lines = $this->getCommandLines();
		if(is_null($command_lines))
			return null;
		
		return self::buildCommandLinesStr($command_lines);
	}

	public function setCommandLinesStr($v)
	{
		$arr = explode (self::STR_SEPARATOR , $v );
		$ret = array();
		foreach($arr as $line)
		{
			$arrLine = explode (self::KEY_SEPARATOR , $line, 2 );
			$ret[$arrLine[0]] = $arrLine[1];
		}
		$this->setCommandLines ( $ret );
	} 
*/

	/**
	 * @return array
	 */
	public function getCommandLines()
	{
		$command_lines = $this->command_lines;//parent::getCommandLines();
		if(is_null($command_lines))
			return null;
			
		try{
			return @unserialize($command_lines);
		}
		catch(Exception $e)
		{
			return null;
		}
	}
	
	
	/**
	 *
	 * @param array $v
	 */
	public function setCommandLines($v)
	{

		if ($this->command_lines !== $v) {
			$this->command_lines = $v;
		}

		return $this;
	} 
	
	/**
	 * @return array
	 */
	public function getTagsArray()
	{
		return explode(',', $this->getTags());
	}
	
	/**
	 * @param string $v
	 * @return boolean
	 */
	public function hasTag($v)
	{
		$tags = explode(',', $this->getTags());
		return in_array($v, $tags);
	}
	
	public function getCollectionTag()
	{
		$tags = explode(',', $this->getTags());
		foreach(flavorParams::$COLLECTION_TAGS as $tag)
		{
			if(in_array($tag, $tags))
				return $tag;
		}
		return null;
	}
	
	public function setFlavorParamsId($v)
	{
		if ($v !== null) {
			$this->flavor_params_id = (int) $v;
		}
	}
	public function setReadyBehavior($v)
	{
		if ($v !== null) {
			$this->ready_behavior = $v;
		}
	}
	public function setTags($v)
	{
		if ($v !== null) {
			$this->tags = $v;
		}
	}
	public function getTags()
	{
		return $this->tags;
	}
	public function setName($v)
	{
		if ($v !== null) {
			$this->name = $v;
		}
	}
	
	public function getName() { 
		return $this->name;
	}
	
	public function getId() { 
		return null;
	}
	public function getReadyBehavior() {
		return 0;
	}
	public function setFormat($v)
	{
		if ($v !== null) {
			$this->format = $v;
		}
	}
	public function setVideoCodec($v)
	{
		if ($v !== null) {
			$this->video_codec = $v;
		}
	}
	public function getVideoCodec()
	{
		return $this->video_codec;
	}
	
	public function setVideoBitrate($v)
	{
		if ($v !== null) {
			$this->video_bitrate = $v;
		}
	}
	public function getVideoBitrate()
	{
		return $this->video_bitrate;
	}
	public function setWidth($v)
	{
		if ($v !== null) {
			$this->width = $v;
		}
	}
	public function getWidth()
	{
		return $this->width;
	}
	public function setHeight($v)
	{
		if ($v !== null) {
			$this->height = $v;
		}
	}
	public function getHeight()
	{
		return $this->height;
	}
	public function setFrameRate($v)
	{
		if ($v !== null) {
			$this->frame_rate = $v;
		}
	}
	public function getFrameRate()
	{
		return $this->frame_rate;
	}
	public function setGopSize($v)
	{
		if ($v !== null) {
			$this->gop_size = $v;
		}
	}
	public function getGopSize()
	{
		return $this->gop_size;
	}
	public function getTwoPass()
	{
		return 0;
	}
	public function setAudioCodec($v)
	{
		if ($v !== null) {
			$this->audio_codec = $v;
		}
	}
	public function getAudioCodec()
	{
		return $this->audio_codec;
	}
	public function setAudioBitrate($v)
	{
		if ($v !== null) {
			$this->audio_bitrate = $v;
		}
	}
	public function getAudioBitrate()
	{
		return $this->audio_bitrate;
	}
	public function setAudioChannels($v)
	{
		if ($v !== null) {
			$this->audio_channels = $v;
		}
	}
	public function getAudioChannels()
	{
		return $this->audio_channels;
	}
	public function setAudioSampleRate($v)
	{
		if ($v !== null) {
			$this->audio_sample_rate = $v;
		}
	}
	public function getAudioSampleRate()
	{
		return $this->audio_sample_rate;
	}
	public function getAudioResolution()
	{
		return 0;
	}
	public function setEngineVersion($v)
	{
		if ($v !== null) {
			$this->engine_version = $v;
		}
	}
	public function getEngineVersion()
	{
		return $this->engine_version;
	}
	
	public function setConversionEngines($v)
	{
		if ($v !== null) {
			$v = (string) $v;
		}

		if ($this->conversion_engines !== $v) {
			$this->conversion_engines = $v;
		}

		return $this;
	} // setConversionEngines()

	public function getConversionEngines()
	{
		return ($this->conversion_engines);
	} 
	
	public function setConversionEnginesExtraParams($v)
	{
		if ($v !== null) {
			$v = (string) $v;
		}

		if ($this->conversion_engines_extra_params !== $v) {
			$this->conversion_engines_extra_params = $v;
		}

		return $this;
	} // 
	public function getConversionEnginesExtraParams()
	{
		return $this->conversion_engines_extra_params;
	} // 
	
	public function setFileExt($v)
	{
		if ($v !== null) {
			$this->file_ext = $v;
		}
	}
	public function setClipOffset($v)
	{
		if ($v !== null) {
			$this->clip_offset = $v;
		}
	}
	
	public function getClipOffset()
	{
		return $this->clip_offset;
	}
	
	public function setClipDuration($v)
	{
		if ($v !== null) {
			$this->clip_duration = $v;
		}
	}
	public function getClipDuration()
	{
		return $this->clip_duration;
	}
	
	
	public function setOperators($v){
		if ($v !== null) {
			$this->operators = $v;
		}
	}
	public function getOperators(){
		return $this->operators;
	}
/*
	public function set($v)
	{
		if ($v !== null) {
			$this-> = $v;
		}
	}
	public function set($v)
	{
		if ($v !== null) {
			$this-> = $v;
		}
	}
	public function set($v)
	{
		if ($v !== null) {
			$this-> = $v;
		}
	}
*/
	public function getFormat()
	{
		return $this->format;
	}
	
}

class kConvertJobData 
{
	const CONVERSION_ENGINE_KALTURA_COM = 0;
	const CONVERSION_ENGINE_ON2 = 1;
	const CONVERSION_ENGINE_FFMPEG = 2;
	const CONVERSION_ENGINE_MENCODER = 3;
	const CONVERSION_ENGINE_ENCODING_COM = 4;
	const CONVERSION_ENGINE_EXPRESSION_ENCODER3 = 5;
	const CONVERSION_ENGINE_EXPRESSION_ENCODER = 55;
	const CONVERSION_ENGINE_QUICK_TIME_PLAYER_TOOLS = 6;
	const CONVERSION_ENGINE_FAST_START = 7;
	const CONVERSION_ENGINE_AVIDEMUX = 8;
	
	const CONVERSION_ENGINE_FFMPEG_VP8 = 98;
	const CONVERSION_ENGINE_FFMPEG_AUX = 99;
	
	const CONVERSION_MILTI_COMMAND_LINE_SEPERATOR = ';';
	const CONVERSION_FAST_START_SIGN = 'FS';
	
	
	// document conversion engines
	const CONVERSION_ENGINE_PDF2SWF = 201;
	const CONVERSION_ENGINE_PDF_CREATOR = 202;
	const CONVERSION_ENGINE_OPENOFFICE_UCONV = 203;
}

class flavorParams {


	/**
	 * The Peer class.
	 * Instance provides a convenient way of calling static methods on a class
	 * that calling code may not be able to identify.
	 * @var        flavorParamsPeer
	 */

	/**
	 * The value for the id field.
	 * @var        int
	 */
	protected $id;

	/**
	 * The value for the version field.
	 * @var        int
	 */
	protected $version;

	/**
	 * The value for the partner_id field.
	 * @var        int
	 */
	protected $partner_id;

	/**
	 * The value for the name field.
	 * Note: this column has a database default value of: ''
	 * @var        string
	 */
	protected $name;

	/**
	 * The value for the tags field.
	 * @var        string
	 */
	protected $tags;

	/**
	 * The value for the description field.
	 * Note: this column has a database default value of: ''
	 * @var        string
	 */
	protected $description;

	/**
	 * The value for the ready_behavior field.
	 * @var        int
	 */
	protected $ready_behavior;

	/**
	 * The value for the created_at field.
	 * @var        string
	 */
	protected $created_at;

	/**
	 * The value for the updated_at field.
	 * @var        string
	 */
	protected $updated_at;

	/**
	 * The value for the deleted_at field.
	 * @var        string
	 */
	protected $deleted_at;

	/**
	 * The value for the is_default field.
	 * Note: this column has a database default value of: 0
	 * @var        int
	 */
	protected $is_default;

	/**
	 * The value for the format field.
	 * @var        string
	 */
	protected $format;

	/**
	 * The value for the video_codec field.
	 * @var        string
	 */
	protected $video_codec;

	/**
	 * The value for the video_bitrate field.
	 * Note: this column has a database default value of: 0
	 * @var        int
	 */
	protected $video_bitrate;

	/**
	 * The value for the audio_codec field.
	 * @var        string
	 */
	protected $audio_codec;

	/**
	 * The value for the audio_bitrate field.
	 * Note: this column has a database default value of: 0
	 * @var        int
	 */
	protected $audio_bitrate;

	/**
	 * The value for the audio_channels field.
	 * Note: this column has a database default value of: 0
	 * @var        int
	 */
	protected $audio_channels;

	/**
	 * The value for the audio_sample_rate field.
	 * Note: this column has a database default value of: 0
	 * @var        int
	 */
	protected $audio_sample_rate;

	/**
	 * The value for the audio_resolution field.
	 * Note: this column has a database default value of: 0
	 * @var        int
	 */
	protected $audio_resolution;

	/**
	 * The value for the width field.
	 * Note: this column has a database default value of: 0
	 * @var        int
	 */
	protected $width;

	/**
	 * The value for the height field.
	 * Note: this column has a database default value of: 0
	 * @var        int
	 */
	protected $height;

	/**
	 * The value for the frame_rate field.
	 * Note: this column has a database default value of: 0
	 * @var        double
	 */
	protected $frame_rate;

	/**
	 * The value for the gop_size field.
	 * Note: this column has a database default value of: 0
	 * @var        int
	 */
	public $gop_size;

	/**
	 * The value for the two_pass field.
	 * Note: this column has a database default value of: false
	 * @var        boolean
	 */
	public $two_pass;

	/**
	 * The value for the conversion_engines field.
	 * @var        string
	 */
	public $conversion_engines;

	/**
	 * The value for the conversion_engines_extra_params field.
	 * @var        string
	 */
	public $conversion_engines_extra_params;

	/**
	 * The value for the custom_data field.
	 * @var        string
	 */
	public $custom_data;

	/**
	 * The value for the view_order field.
	 * @var        int
	 */
	public $view_order;

	/**
	 * The value for the creation_mode field.
	 * Note: this column has a database default value of: 1
	 * @var        int
	 */
	public $creation_mode;

	/**
	 * The value for the deinterlice field.
	 * @var        int
	 */
	public $deinterlice;

	/**
	 * The value for the rotate field.
	 * @var        int
	 */
	public $rotate;

	/**
	 * The value for the operators field.
	 * @var        string
	 */
	public $operators;

	/**
	 * The value for the engine_version field.
	 * @var        int
	 */
	public $engine_version;

	/**
	 * @var        array flavorParamsOutput[] Collection to store aggregation of flavorParamsOutput objects.
	 */
	public $collflavorParamsOutputs;

	/**
	 * @var        Criteria The criteria used to select the current contents of collflavorParamsOutputs.
	 */
	private $lastflavorParamsOutputCriteria = null;

	/**
	 * @var        array flavorAsset[] Collection to store aggregation of flavorAsset objects.
	 */
	public $collflavorAssets;

	/**
	 * @var        Criteria The criteria used to select the current contents of collflavorAssets.
	 */
	private $lastflavorAssetCriteria = null;

	/**
	 * @var        array flavorParamsConversionProfile[] Collection to store aggregation of flavorParamsConversionProfile objects.
	 */
	public $collflavorParamsConversionProfiles;

	/**
	 * @var        Criteria The criteria used to select the current contents of collflavorParamsConversionProfiles.
	 */
	private $lastflavorParamsConversionProfileCriteria = null;

	/**
	 * Flag to prevent endless save loop, if this object is referenced
	 * by another object which falls in this transaction.
	 * @var        boolean
	 */
	public $alreadyInSave = false;

	/**
	 * Flag to prevent endless validation loop, if this object is referenced
	 * by another object which falls in this transaction.
	 * @var        boolean
	 */
	public $alreadyInValidation = false;

	/**
	 * Store columns old values before the changes
	 * @var        array
	 */
	public $oldColumnsValues = array();
	
	/**
	 * @return array
	 */
	public function getColumnsOldValues()
	{
		return $this->oldColumnsValues;
	}

	/**
	 * Applies default values to this object.
	 * This method should be called from the object's constructor (or
	 * equivalent initialization method).
	 * @see        __construct()
	 */
	public function applyDefaultValues()
	{
		$this->name = '';
		$this->description = '';
		$this->is_default = 0;
		$this->video_bitrate = 0;
		$this->audio_bitrate = 0;
		$this->audio_channels = 0;
		$this->audio_sample_rate = 0;
		$this->audio_resolution = 0;
		$this->width = 0;
		$this->height = 0;
		$this->frame_rate = 0;
		$this->gop_size = 0;
		$this->two_pass = false;
		$this->creation_mode = 1;
	}

	/**
	 * Initializes internal state of BaseflavorParams object.
	 * @see        applyDefaults()
	 */
	public function __construct()
	{
		$this->applyDefaultValues();
	}

	/**
	 * Get the [id] column value.
	 * 
	 * @return     int
	 */
	public function getId()
	{
		return $this->id;
	}

	/**
	 * Get the [version] column value.
	 * 
	 * @return     int
	 */
	public function getVersion()
	{
		return $this->version;
	}

	/**
	 * Get the [partner_id] column value.
	 * 
	 * @return     int
	 */
	public function getPartnerId()
	{
		return $this->partner_id;
	}

	/**
	 * Get the [name] column value.
	 * 
	 * @return     string
	 */
	public function getName()
	{
		return $this->name;
	}

	/**
	 * Get the [tags] column value.
	 * 
	 * @return     string
	 */
	public function getTags()
	{
		return $this->tags;
	}

	/**
	 * Get the [description] column value.
	 * 
	 * @return     string
	 */
	public function getDescription()
	{
		return $this->description;
	}

	/**
	 * Get the [ready_behavior] column value.
	 * 
	 * @return     int
	 */
	public function getReadyBehavior()
	{
		return $this->ready_behavior;
	}

	/**
	 * Get the [is_default] column value.
	 * 
	 * @return     int
	 */
	public function getIsDefault()
	{
		return $this->is_default;
	}

	/**
	 * Get the [format] column value.
	 * 
	 * @return     string
	 */
	public function getFormat()
	{
		return $this->format;
	}

	/**
	 * Get the [video_codec] column value.
	 * 
	 * @return     string
	 */
	public function getVideoCodec()
	{
		return $this->video_codec;
	}

	/**
	 * Get the [video_bitrate] column value.
	 * 
	 * @return     int
	 */
	public function getVideoBitrate()
	{
		return $this->video_bitrate;
	}

	/**
	 * Get the [audio_codec] column value.
	 * 
	 * @return     string
	 */
	public function getAudioCodec()
	{
		return $this->audio_codec;
	}

	/**
	 * Get the [audio_bitrate] column value.
	 * 
	 * @return     int
	 */
	public function getAudioBitrate()
	{
		return $this->audio_bitrate;
	}

	/**
	 * Get the [audio_channels] column value.
	 * 
	 * @return     int
	 */
	public function getAudioChannels()
	{
		return $this->audio_channels;
	}

	/**
	 * Get the [audio_sample_rate] column value.
	 * 
	 * @return     int
	 */
	public function getAudioSampleRate()
	{
		return $this->audio_sample_rate;
	}

	/**
	 * Get the [audio_resolution] column value.
	 * 
	 * @return     int
	 */
	public function getAudioResolution()
	{
		return $this->audio_resolution;
	}

	/**
	 * Get the [width] column value.
	 * 
	 * @return     int
	 */
	public function getWidth()
	{
		return $this->width;
	}

	/**
	 * Get the [height] column value.
	 * 
	 * @return     int
	 */
	public function getHeight()
	{
		return $this->height;
	}

	/**
	 * Get the [frame_rate] column value.
	 * 
	 * @return     double
	 */
	public function getFrameRate()
	{
		return $this->frame_rate;
	}

	/**
	 * Get the [gop_size] column value.
	 * 
	 * @return     int
	 */
	public function getGopSize()
	{
		return $this->gop_size;
	}

	/**
	 * Get the [two_pass] column value.
	 * 
	 * @return     boolean
	 */
	public function getTwoPass()
	{
		return $this->two_pass;
	}

	/**
	 * Get the [conversion_engines] column value.
	 * 
	 * @return     string
	 */
	public function getConversionEngines()
	{
		return $this->conversion_engines;
	}

	/**
	 * Get the [conversion_engines_extra_params] column value.
	 * 
	 * @return     string
	 */
	public function getConversionEnginesExtraParams()
	{
		return $this->conversion_engines_extra_params;
	}

	/**
	 * Get the [custom_data] column value.
	 * 
	 * @return     string
	 */
	public function getCustomData()
	{
		return $this->custom_data;
	}

	/**
	 * Get the [view_order] column value.
	 * 
	 * @return     int
	 */
	public function getViewOrder()
	{
		return $this->view_order;
	}

	/**
	 * Get the [creation_mode] column value.
	 * 
	 * @return     int
	 */
	public function getCreationMode()
	{
		return $this->creation_mode;
	}

	/**
	 * Get the [deinterlice] column value.
	 * 
	 * @return     int
	 */
	public function getDeinterlice()
	{
		return $this->deinterlice;
	}

	/**
	 * Get the [rotate] column value.
	 * 
	 * @return     int
	 */
	public function getRotate()
	{
		return $this->rotate;
	}

	/**
	 * Get the [operators] column value.
	 * 
	 * @return     string
	 */
	public function getOperators()
	{
		return $this->operators;
	}

	/**
	 * Get the [engine_version] column value.
	 * 
	 * @return     int
	 */
	public function getEngineVersion()
	{
		return $this->engine_version;
	}

	public function getClipOffset()		{return 00000;}
	public function getClipDuration()	{return 0000;}
	
	public function simulate($fmt, $vcodec, $w=0, $h, $br, $acodec="", $ab=96, $ar=22050, $engines="1,2,3,99"){
		//		$fl = $source;

		$this->name = $fmt;
		$this->format = $fmt;
		$this->description = '';
		$this->is_default = 0;
		$this->video_codec = $vcodec;
		$this->video_bitrate = $br;
		$this->audio_codec = $acodec;
		$this->audio_bitrate = $ab;
		$this->audio_channels = 0;
		$this->audio_sample_rate = $ar;
		$this->audio_resolution = 0;
		$this->width = $w;
		$this->height = $h;
		$this->frame_rate = 0;
		$this->gop_size = 0;
		$this->two_pass = false;
		$this->creation_mode = 1;
		$this->engine_version = 0;
		$this->conversion_engines = $engines;
//		$this->operators="[[{\"id\":\"expressionEncoder.ExpressionEncoder\"}]]";
//		$this->operators="[[{\"id\":\"quickTimeTools.QuickTimeTools\"},{\"id\":1}],[{\"id\":\"quickTimeTools.QuickTimeTools\"},{\"id\":2}],[{\"id\":\"quickTimeTools.QuickTimeTools\"},{\"id\":99}]]";
		
//		$this->operators="[[{\"id\":2}],[{\"id\":3}]]";
//		$this->operators="[[{\"id\":2}],[{\"id\":\"inletArmada.InletArmada\",\"extra\":\"516\"},{\"id\":3}]]";
//		$this->operators="[[{\"id\":\"quickTimeTools.QuickTimeTools\"},{\"id\":2}]]";
		//		$this->operators="[[{\"id\":2,\"extra\":null,\"command\":null}],[{\"id\":\"fastStart.FastStart\",\"extra\":null,\"command\":null},{\"id\":2,\"extra\":null,\"command\":null}]]";
//		$this->operators="[[{\"id\":\"quickTimeTools.QuickTimeTools\"},{\"id\":1}],[{\"id\":\"quickTimeTools.QuickTimeTools\"},{\"id\":2}],[{\"id\":\"quickTimeTools.QuickTimeTools\"},{\"id\":99}]]";
		 
//		$this->operators="[[{\"id\":202,\"extra\":null,\"command\":null}]]";
	}
};

class mediaInfo {
	public function __construct() {
		$this->streamsCollectionStr = null;
		
		$this->containerId = 0;
		$this->containerFormat = null;
		$this->containerDuration = 0;
		$this->containerBitRate = 0;
		$this->fileSize = 0;
		
		$this->videoCodecId = 		null;
		$this->videoFormat =        null;
		$this->videoDuration =      0;
		$this->videoBitRate =       0;
		$this->videoWidth =         0;
		$this->videoHeight =        0;
		$this->videoFrameRate =     0;
		$this->videoDar =           0;
		$this->getVideoRotation =   0;
		$this->scanType =           0;
		
		$this->audioCodecId = 		null;
		$this->audioFormat =        null;
		$this->audioDuration =      0;
		$this->audioBitRate =       0;
		$this->audioChannels =      0;
		$this->audioSamplingRate =  0;
		$this->audioResolution =    0;
	}
	
	public function __destruct() {
		unset($this);
	}
	
/*
		$medSet->_streamsCollectionStr = $this->getMultiStreamInfo();
		
		$medSet->_container->_id=$this->getContainerId();
		$medSet->_container->_format=$this->getContainerFormat();
		$medSet->_container->_duration=$this->getContainerDuration();
		$medSet->_container->_bitRate=$this->getContainerBitRate();
		$medSet->_container->_fileSize=$this->getFileSize();

		$medSet->_video->_id = $this->getVideoCodecId();
		$medSet->_video->_format = $this->getVideoFormat();
		$medSet->_video->_duration = $this->getVideoDuration();
		$medSet->_video->_bitRate = $this->getVideoBitRate();
		$medSet->_video->_width = $this->getVideoWidth();
		$medSet->_video->_height = $this->getVideoHeight();
		$medSet->_video->_frameRate = $this->getVideoFrameRate();
		$medSet->_video->_dar = $this->getVideoDar();
		$medSet->_video->_rotation = $this->getVideoRotation();
		$medSet->_video->_scanType = $this->getScanType();

		$medSet->_audio->_id = $this->getAudioCodecId();
		$medSet->_audio->_format = $this->getAudioFormat();
		$medSet->_audio->_duration = $this->getAudioDuration();
		$medSet->_audio->_bitRate = $this->getAudioBitRate();
		$medSet->_audio->_channels = $this->getAudioChannels();
		$medSet->_audio->_sampleRate = $this->getAudioSamplingRate();
		$medSet->_audio->_resolution = $this->getAudioResolution();
		
	public function () { return $this->; }
		
	*/
	
	public function getMultiStreamInfo() { return $this->streamsCollectionStr; }
	public function getContainerId() { return $this->containerId; }
	public function getContainerFormat() { return $this->containerFormat; }
	public function getContainerDuration() { return $this->containerDuration; }
	public function getContainerBitRate() { return $this->containerBitRate; }
	public function getFileSize() { return $this->fileSize; }
	
	public function getVideoCodecId() { return $this->videoCodecId; }
	public function getVideoFormat() { return $this->videoFormat; }
	public function getVideoDuration() { return $this->videoDuration; }
	public function getVideoBitRate() { return $this->videoBitRate; }
	public function getVideoWidth() { return $this->videoWidth; }
	public function getVideoHeight() { return $this->videoHeight; }
	public function getVideoFrameRate() { return $this->videoFrameRate; }
	public function getVideoDar() { return $this->videoDar; }
	public function getVideoRotation() { return $this->getVideoRotation; }
	public function getScanType() { return $this->scanType; }

	public function getAudioCodecId() { return $this->audioCodecId; }
	public function getAudioFormat() { return $this->audioFormat; }
	public function getAudioDuration() { return $this->audioDuration; }
	public function getAudioBitRate() { return $this->audioBitRate; }
	public function getAudioChannels() { return $this->audioChannels; }
	public function getAudioSamplingRate() { return $this->audioSamplingRate; }
	public function getAudioResolution() { return $this->audioResolution; }
	
	public function LoadFromMediaset($medSet){
		$this->streamsCollectionStr = $medSet->_streamsCollectionStr;
		
		if($medSet->_container) {
			$this->containerId = $medSet->_container->_id;
			$this->containerFormat = $medSet->_container->_format;
			$this->containerDuration = $medSet->_container->_duration;
			$this->containerBitRate = $medSet->_container->_bitRate;
			$this->fileSize = $medSet->_container->_fileSize;
		}
		if($medSet->_video) {
			$this->videoCodecId = 		$medSet->_video->_id;
			$this->videoFormat =        $medSet->_video->_format;
			$this->videoDuration =      $medSet->_video->_duration;
			$this->videoBitRate =       $medSet->_video->_bitRate;
			$this->videoWidth =         $medSet->_video->_width;
			$this->videoHeight =        $medSet->_video->_height;
			$this->videoFrameRate =     $medSet->_video->_frameRate;
			$this->videoDar =           $medSet->_video->_dar;
			$this->getVideoRotation =   $medSet->_video->_rotation;
			$this->scanType =           $medSet->_video->_scanType;
		}
		if($medSet->_audio) {
			$this->audioCodecId = 		$medSet->_audio->_id;
			$this->audioFormat =        $medSet->_audio->_format;
			$this->audioDuration =      $medSet->_audio->_duration;
			$this->audioBitRate =       $medSet->_audio->_bitRate;
			$this->audioChannels =      $medSet->_audio->_channels;
			$this->audioSamplingRate =  $medSet->_audio->_sampleRate;
			$this->audioResolution =    $medSet->_audio->_resolution;
		}
	}
};

class flavorAsset extends flavorParamsOutput{
	public function setContainerFormat($val) {  $this->containerFormat=$val; }
	public function setSize($val) {  $this->size=$val; }
	public function setVideoCodecId($val) {  $this->videoCodecId=$val; }
	public function setBitrate($val) {  $this->bitrate=$val; }
	
};

class KalturaPluginManager
{
	const OBJECT_TYPE_SYNCABLE = 2;
	const OBJECT_TYPE_MEDIA_SOURCE = 3;
	const OBJECT_TYPE_OPERATION_ENGINE = 4;
	const OBJECT_TYPE_KDL_ENGINE = 5;
	
	const OBJECT_TYPE_ENTRY = 101;
	const OBJECT_TYPE_FLAVOR_PARAMS = 102;
	const OBJECT_TYPE_FLAVOR_PARAMS_OUTPUT = 103;

	const OBJECT_TYPE_KALTURA_ENTRY = 201;
	const OBJECT_TYPE_KALTURA_FLAVOR_PARAMS = 202;
	const OBJECT_TYPE_KALTURA_FLAVOR_PARAMS_OUTPUT = 203;

	public static function loadObject($objectType, $enumValue, array $constructorArgs = null){
		if($enumValue=="quickTimeTools.QuickTimeTools")//kConvertJobData::CONVERSION_ENGINE_QUICK_TIME_PLAYER_TOOLS)
			return new KDLTranscoderQTPTools(KDLTranscoders::QUICK_TIME_PLAYER_TOOLS);
		else if($enumValue=="expressionEncoder.ExpressionEncoder")
			return new KDLOperatorExpressionEncoder(KDLTranscoders::EXPRESSION_ENCODER);
		else if($enumValue==kConvertJobData::CONVERSION_ENGINE_AVIDEMUX)
			return new KDLOperatorAvidemux(KDLTranscoders::AVIDEMUX);
		else if($enumValue=="fastStart.FastStart")
			return new KDLOperatorQTFastStart(KDLTranscoders::QT_FASTSTART);
		else if($enumValue=="inletArmada.InletArmada")
			return new KDLOperatorInletArmada("inletArmada.InletArmada");
	}
	
};