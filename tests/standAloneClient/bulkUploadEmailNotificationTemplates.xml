<?xml version="1.0" encoding="UTF-8"?>
<xml>
	<config>
		<serviceUrl>http://{prompt:Host name:}/</serviceUrl>
		<partnerId>-2</partnerId>
		<clientTag>Stand alone php 1.0.0</clientTag>
		<curlTimeout>30</curlTimeout>
		<userAgent>Stand alone php 1.0.0</userAgent>
	</config>
	<session>
		<!-- script will ask for username / password interactively -->
	</session>
	<multirequest>
		<request service="eventNotificationTemplate" action="add" plugin="eventNotification" partnerId="0">
			<template objectType="KalturaEmailNotificationTemplate">
				<name>Categories CSV - Bulk Job Completed Successfully</name>
				<systemName>Categories_CSV_Bulk_Success_Notification</systemName>
				<description>Email notification template for Categories CSV Bulk Upload successful completion.</description>
				<automaticDispatchEnabled>1</automaticDispatchEnabled>
				<eventType>1</eventType> 
				<eventObjectType>10</eventObjectType>
				<eventConditions objectType="array">
					<item objectType="KalturaEventFieldCondition">
						<description>Batch job of type Bulk Upload</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getJobType() == BatchJobType::BULKUPLOAD</code>
						</field>
					</item>
					<item objectType="KalturaEventFieldCondition">
						<description>Bulk Upload type CSV</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getJobSubType() == BulkUploadCsvPlugin::getBulkUploadTypeCoreValue(BulkUploadCsvType::CSV)</code>
						</field>
					</item>
					<item objectType="KalturaEventFieldCondition">
						<field objectType="KalturaEvalBooleanField">
							<description>Category object uploaded</description>
							<code>$scope->getEvent()->getBatchJob()->getData()->getBulkUploadObjectType() == BulkUploadObjectType::CATEGORY</code>
						</field>
					</item>
					<item objectType="KalturaEventFieldCondition">
						<field objectType="KalturaEvalBooleanField">
							<description>Bulk Upload finished successfully</description>
							<code>$scope->getEvent()->getBatchJob()->getStatus() == BatchJob::BATCHJOB_STATUS_FINISHED</code>
						</field>
					</item>
				</eventConditions>
				<format>1</format>
				<subject>Categories CSV - Bulk Job Completed Successfully</subject>
				<body><![CDATA[ Hello,<p>The processing of your bulk job has been completed successfully.</p><p>Bulk Job ID = {job_id} <br>Job Submission Date/Time:  {date_time}</p><p>More details are available in the log file, at: <a href={log_url}>{log_url}</a></p><p>Kaltura Customer Service</p>]]></body>
				<fromEmail>{from_email}</fromEmail>
				<fromName>{from_name}</fromName>
				<to objectType="KalturaEmailNotificationStaticRecipientProvider">
					<emailRecipients objectType="array">			
						<item objectType = "KalturaEmailNotificationRecipient">
							<email objectType="KalturaStringValue">
								<value>{to_email_admin}</value>
							</email>
							<name objectType="KalturaStringValue">
								<value>{to_email_admin}</value>
							</name>
						</item>
						<item objectType = "KalturaEmailNotificationRecipient">
							<email objectType="KalturaStringValue">
								<value>{to_email_user}</value>
							</email>
							<name objectType="KalturaStringValue">
								<value>{to_email_user}</value>
							</name>
						</item>
					</emailRecipients>
				</to>
				<contentParameters objectType="array">
					<item objectType="KalturaEventNotificationParameter">
						<key>job_id</key>
						<description>Batch Job ID</description>
						<value objectType="KalturaEvalStringField">
							<code>$scope->getEvent()->getBatchJob()->getId()</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>log_url</key>
						<description>Bulk upload log url</description>
						<value objectType="KalturaEvalStringField">
							<code>kFlowHelper::createBulkUploadLogUrl($scope->getEvent()->getBatchJob())</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>date_time</key>
						<description>Bulk upload creation time</description>
						<value objectType="KalturaEvalStringField">
							<code>$scope->getEvent()->getBatchJob()->getCreatedAt()</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>from_email</key>
						<description>Sender email</description>
						<value objectType="KalturaEvalStringField">
							<code>kConf::get("batch_alert_email")</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>from_name</key>
						<description>Sender name</description>
						<value objectType="KalturaEvalStringField">
							<code>kConf::get("batch_alert_name")</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>to_email_admin</key>
						<description>Recepient admin email</description>
						<value objectType="KalturaEvalStringField">
							<code>$scope->getEvent()->getBatchJob()->getPartner()->getAdminEmail()</code>
						</value>
					</item>	
					<item objectType="KalturaEventNotificationParameter">
						<key>to_email_user</key>
						<description>Recepient user email</description>
						<value objectType="KalturaEvalStringField">
							<code>kuserPeer::getKuserByPartnerAndUid($scope->getPartnerId(), $scope->getEvent()->getBatchJob()->getData()->getUserId())->getEmail()</code>
						</value>
					</item>	
				</contentParameters>
			</template>
		</request>
		<request service="eventNotificationTemplate" action="updateStatus" plugin="eventNotification" partnerId="0">
			<id>{1:result:id}</id>
			<status>1</status><!-- EventNotificationTemplateStatus::DISABLED -->
		</request>
	</multirequest>
	<multirequest>
		<request service="eventNotificationTemplate" action="add" plugin="eventNotification" partnerId="0">
			<template objectType="KalturaEmailNotificationTemplate">
				<name>Categories CSV - Bulk Job Completed with Errors</name>
				<systemName>Categories_CSV_Bulk_Errors_Notification</systemName>
				<description>Email notification template for Categories CSV Bulk Upload completion with errors.</description>
				<automaticDispatchEnabled>1</automaticDispatchEnabled>
				<eventType>1</eventType> 
				<eventObjectType>10</eventObjectType>
				<eventConditions objectType="array">
					<item objectType="KalturaEventFieldCondition">
						<description>Batch job of type Bulk Upload</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getJobType() == BatchJobType::BULKUPLOAD</code>
						</field>
					</item>
					<item objectType="KalturaEventFieldCondition">
						<description>Bulk Upload type CSV</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getJobSubType() == BulkUploadCsvPlugin::getBulkUploadTypeCoreValue(BulkUploadCsvType::CSV)</code>
						</field>
					</item>
					<item objectType="KalturaEventFieldCondition">
						<description>Category object uploaded</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getData()->getBulkUploadObjectType() == BulkUploadObjectType::CATEGORY</code>
						</field>
					</item>
					<item objectType="KalturaEventFieldCondition">
						<description>Bulk Upload finished with errors</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getStatus() == BatchJob::BATCHJOB_STATUS_FINISHED_PARTIALLY</code>
						</field>
					</item>
				</eventConditions>
				<format>1</format>
				<subject>Categories CSV - Bulk Job Completed with some Errors</subject>
				<body><![CDATA[ Hello,<p>The processing of your bulk job has been completed, but with some errors.</p><p>Bulk Job ID = {job_id} <br>Job Submission Date/Time:  {date_time}</p><p>More details are available in the log file, at: <a href={log_url}>{log_url}</a></p><p>Kaltura Customer Service</p>]]></body>
				<fromEmail>{from_email}</fromEmail>
				<fromName>{from_name}</fromName>
				<to objectType="KalturaEmailNotificationStaticRecipientProvider">
					<emailRecipients objectType="array">
						<item objectType = "KalturaEmailNotificationRecipient">
							<email objectType="KalturaStringValue">
								<value>{to_email_admin}</value>
							</email>
							<name objectType="KalturaStringValue">
								<value>{to_email_admin}</value>
							</name>
						</item>
						<item objectType = "KalturaEmailNotificationRecipient">
							<email objectType="KalturaStringValue">
								<value>{to_email_user}</value>
							</email>
							<name objectType="KalturaStringValue">
								<value>{to_email_user}</value>
							</name>
						</item>
					</emailRecipients>
				</to>
				<contentParameters objectType="array">
					<item objectType="KalturaEventNotificationParameter">
						<key>job_id</key>
						<description>Batch Job ID</description>
						<value objectType="KalturaEvalStringField">
							<code>$scope->getEvent()->getBatchJob()->getId()</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>log_url</key>
						<description>Bulk upload log url</description>
						<value objectType="KalturaEvalStringField">
							<code>kFlowHelper::createBulkUploadLogUrl($scope->getEvent()->getBatchJob())</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>date_time</key>
						<description>Bulk upload creation time</description>
						<value objectType="KalturaEvalStringField">
							<code>$scope->getEvent()->getBatchJob()->getCreatedAt()</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>from_email</key>
						<description>Sender email</description>
						<value objectType="KalturaEvalStringField">
							<code>kConf::get("batch_alert_email")</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>from_name</key>
						<description>Sender name</description>
						<value objectType="KalturaEvalStringField">
							<code>kConf::get("batch_alert_name")</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>to_email_admin</key>
						<description>Recepient admin email</description>
						<value objectType="KalturaEvalStringField">
							<code>$scope->getEvent()->getBatchJob()->getPartner()->getAdminEmail()</code>
						</value>
					</item>	
					<item objectType="KalturaEventNotificationParameter">
						<key>to_email_user</key>
						<description>Recepient user email</description>
						<value objectType="KalturaEvalStringField">
							<code>kuserPeer::getKuserByPartnerAndUid($scope->getPartnerId(), $scope->getEvent()->getBatchJob()->getData()->getUserId())->getEmail()</code>
						</value>
					</item>	
				</contentParameters>
			</template>
		</request>
		<request service="eventNotificationTemplate" action="updateStatus" plugin="eventNotification" partnerId="0">
			<id>{1:result:id}</id>
			<status>1</status><!-- EventNotificationTemplateStatus::DISABLED -->
		</request>
	</multirequest>
	<multirequest>
			<request service="eventNotificationTemplate" action="add" plugin="eventNotification" partnerId="0">
			<template objectType="KalturaEmailNotificationTemplate">
				<name>Categories CSV - Bulk Job Failed</name>
				<systemName>Categories_CSV_Bulk_Failure_Notification</systemName>
				<description>Email notification template for Categories CSV Bulk Upload failure.</description>
				<automaticDispatchEnabled>1</automaticDispatchEnabled>
				<eventType>1</eventType> 
				<eventObjectType>10</eventObjectType>
				<eventConditions objectType="array">
					<item objectType="KalturaEventFieldCondition">
						<description>Batch job of type Bulk Upload</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getJobType() == BatchJobType::BULKUPLOAD</code>
						</field>
					</item>
					<item objectType="KalturaEventFieldCondition">
						<description>Bulk Upload type CSV</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getJobSubType() == BulkUploadCsvPlugin::getBulkUploadTypeCoreValue(BulkUploadCsvType::CSV)</code>
						</field>
					</item>
					<item objectType="KalturaEventFieldCondition">
						<description>Category object uploaded</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getData()->getBulkUploadObjectType() == BulkUploadObjectType::CATEGORY</code>
						</field>
					</item>
					<item objectType="KalturaEventFieldCondition">
						<description>Bulk Upload failed</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getStatus() == BatchJob::BATCHJOB_STATUS_FAILED</code>
						</field>
					</item>
				</eventConditions>
				<format>1</format>
				<subject>Categories CSV - Bulk Job Failed</subject>
				<body><![CDATA[ Hello,<p>The processing of your bulk job has failed.</p><p>Bulk Job ID = {job_id} <br>Job Submission Date/Time:  {date_time}</p><p>More details are available in the log file, at: <a href={log_url}>{log_url}</a></p><p>Kaltura Customer Service</p>]]></body>
				<fromEmail>{from_email}</fromEmail>
				<fromName>{from_name}</fromName>
				<to objectType="KalturaEmailNotificationStaticRecipientProvider">
					<emailRecipients objectType="array">
						<item objectType = "KalturaEmailNotificationRecipient">
							<email objectType="KalturaStringValue">
								<value>{to_email_admin}</value>
							</email>
							<name objectType="KalturaStringValue">
								<value>{to_email_admin}</value>
							</name>
						</item>
						<item objectType = "KalturaEmailNotificationRecipient">
							<email objectType="KalturaStringValue">
								<value>{to_email_user}</value>
							</email>
							<name objectType="KalturaStringValue">
								<value>{to_email_user}</value>
							</name>
						</item>
					</emailRecipients>
				</to>
				<contentParameters objectType="array">
					<item objectType="KalturaEventNotificationParameter">
						<key>job_id</key>
						<description>Batch Job ID</description>
						<value objectType="KalturaEvalStringField">
							<code>$scope->getEvent()->getBatchJob()->getId()</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>log_url</key>
						<description>Bulk upload log url</description>
						<value objectType="KalturaEvalStringField">
							<code>kFlowHelper::createBulkUploadLogUrl($scope->getEvent()->getBatchJob())</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>date_time</key>
						<description>Bulk upload creation time</description>
						<value objectType="KalturaEvalStringField">
							<code>$scope->getEvent()->getBatchJob()->getCreatedAt()</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>from_email</key>
						<description>Sender email</description>
						<value objectType="KalturaEvalStringField">
							<code>kConf::get("batch_alert_email")</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>from_name</key>
						<description>Sender name</description>
						<value objectType="KalturaEvalStringField">
							<code>kConf::get("batch_alert_name")</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>to_email_admin</key>
						<description>Recepient admin email</description>
						<value objectType="KalturaEvalStringField">
							<code>$scope->getEvent()->getBatchJob()->getPartner()->getAdminEmail()</code>
						</value>
					</item>	
					<item objectType="KalturaEventNotificationParameter">
						<key>to_email_user</key>
						<description>Recepient user email</description>
						<value objectType="KalturaEvalStringField">
							<code>kuserPeer::getKuserByPartnerAndUid($scope->getPartnerId(), $scope->getEvent()->getBatchJob()->getData()->getUserId())->getEmail()</code>
						</value>
					</item>	
				</contentParameters>
			</template>
		</request>
		<request service="eventNotificationTemplate" action="updateStatus" plugin="eventNotification" partnerId="0">
			<id>{1:result:id}</id>
			<status>1</status><!-- EventNotificationTemplateStatus::DISABLED -->
		</request>
	</multirequest>
	<multirequest>
		<request service="eventNotificationTemplate" action="add" plugin="eventNotification" partnerId="0">
			<template objectType="KalturaEmailNotificationTemplate">
				<name>End-Users CSV - Bulk Job Completed Successfully</name>
				<systemName>Users_CSV_Bulk_Success_Notification</systemName>
				<description>Email notification template for End-Users CSV Bulk Upload successful completion.</description>
				<automaticDispatchEnabled>1</automaticDispatchEnabled>
				<eventType>1</eventType> 
				<eventObjectType>10</eventObjectType>
				<eventConditions objectType="array">
					<item objectType="KalturaEventFieldCondition">
						<description>Batch job of type Bulk Upload</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getJobType() == BatchJobType::BULKUPLOAD</code>
						</field>
					</item>
					<item objectType="KalturaEventFieldCondition">
						<description>Bulk Upload type CSV</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getJobSubType() == BulkUploadCsvPlugin::getBulkUploadTypeCoreValue(BulkUploadCsvType::CSV)</code>
						</field>
					</item>
					<item objectType="KalturaEventFieldCondition">
						<description>User object uploaded</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getData()->getBulkUploadObjectType() == BulkUploadObjectType::USER</code>
						</field>
					</item>
					<item objectType="KalturaEventFieldCondition">
						<description>Bulk Upload finished successfully</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getStatus() == BatchJob::BATCHJOB_STATUS_FINISHED</code>
						</field>
					</item>
				</eventConditions>
				<format>1</format>
				<subject>End-Users CSV - Bulk Job Completed Successfully</subject>
				<body><![CDATA[ Hello,<p>The processing of your bulk job has been completed successfully.</p><p>Bulk Job ID = {job_id} <br>Job Submission Date/Time:  {date_time}</p><p>More details are available in the log file, at: <a href={log_url}>{log_url}</a></p><p>Kaltura Customer Service</p>]]></body>
				<fromEmail>{from_email}</fromEmail>
				<fromName>{from_name}</fromName>
				<to objectType="KalturaEmailNotificationStaticRecipientProvider">
					<emailRecipients objectType="array">
						<item objectType = "KalturaEmailNotificationRecipient">
							<email objectType="KalturaStringValue">
								<value>{to_email_admin}</value>
							</email>
							<name objectType="KalturaStringValue">
								<value>{to_email_admin}</value>
							</name>
						</item>
						<item objectType = "KalturaEmailNotificationRecipient">
							<email objectType="KalturaStringValue">
								<value>{to_email_user}</value>
							</email>
							<name objectType="KalturaStringValue">
								<value>{to_email_user}</value>
							</name>
						</item>
					</emailRecipients>
				</to>
				<contentParameters objectType="array">
					<item objectType="KalturaEventNotificationParameter">
						<key>job_id</key>
						<description>Batch Job ID</description>
						<value objectType="KalturaEvalStringField">
							<code>$scope->getEvent()->getBatchJob()->getId()</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>log_url</key>
						<description>Bulk upload log url</description>
						<value objectType="KalturaEvalStringField">
							<code>kFlowHelper::createBulkUploadLogUrl($scope->getEvent()->getBatchJob())</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>date_time</key>
						<description>Bulk upload creation time</description>
						<value objectType="KalturaEvalStringField">
							<code>$scope->getEvent()->getBatchJob()->getCreatedAt()</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>from_email</key>
						<description>Sender email</description>
						<value objectType="KalturaEvalStringField">
							<code>kConf::get("batch_alert_email")</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>from_name</key>
						<description>Sender name</description>
						<value objectType="KalturaEvalStringField">
							<code>kConf::get("batch_alert_name")</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>to_email_admin</key>
						<description>Recepient admin email</description>
						<value objectType="KalturaEvalStringField">
							<code>$scope->getEvent()->getBatchJob()->getPartner()->getAdminEmail()</code>
						</value>
					</item>	
					<item objectType="KalturaEventNotificationParameter">
						<key>to_email_user</key>
						<description>Recepient user email</description>
						<value objectType="KalturaEvalStringField">
							<code>kuserPeer::getKuserByPartnerAndUid($scope->getPartnerId(), $scope->getEvent()->getBatchJob()->getData()->getUserId())->getEmail()</code>
						</value>
					</item>	
				</contentParameters>
			</template>
		</request>
		<request service="eventNotificationTemplate" action="updateStatus" plugin="eventNotification" partnerId="0">
			<id>{1:result:id}</id>
			<status>1</status><!-- EventNotificationTemplateStatus::DISABLED -->
		</request>
	</multirequest>
	<multirequest>
		<request service="eventNotificationTemplate" action="add" plugin="eventNotification" partnerId="0">
			<template objectType="KalturaEmailNotificationTemplate">
				<name>End-Users CSV - Bulk Job Completed with Errors</name>
				<systemName>Users_CSV_Bulk_Errors_Notification</systemName>
				<description>Email notification template for End-Users CSV Bulk Upload completion with errors.</description>
				<automaticDispatchEnabled>1</automaticDispatchEnabled>
				<eventType>1</eventType> 
				<eventObjectType>10</eventObjectType>
				<eventConditions objectType="array">
					<item objectType="KalturaEventFieldCondition">
						<description>Batch job of type Bulk Upload</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getJobType() == BatchJobType::BULKUPLOAD</code>
						</field>
					</item>
					<item objectType="KalturaEventFieldCondition">
						<description>Bulk Upload type CSV</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getJobSubType() == BulkUploadCsvPlugin::getBulkUploadTypeCoreValue(BulkUploadCsvType::CSV)</code>
						</field>
					</item>
					<item objectType="KalturaEventFieldCondition">
						<description>User object uploaded</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getData()->getBulkUploadObjectType() == BulkUploadObjectType::USER</code>
						</field>
					</item>
					<item objectType="KalturaEventFieldCondition">
						<description>Bulk Upload finished with errors</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getStatus() == BatchJob::BATCHJOB_STATUS_FINISHED_PARTIALLY</code>
						</field>
					</item>
				</eventConditions>
				<format>1</format>
				<subject>End-Users CSV - Bulk Job Completed with Errors</subject>
				<body><![CDATA[ Hello,<p>The processing of your bulk job has been completed, but with some errors.</p><p>Bulk Job ID = {job_id} <br>Job Submission Date/Time:  {date_time}</p><p>More details are available in the log file, at: <a href={log_url}>{log_url}</a></p><p>Kaltura Customer Service</p>]]></body>
				<fromEmail>{from_email}</fromEmail>
				<fromName>{from_name}</fromName>
				<to objectType="KalturaEmailNotificationStaticRecipientProvider">
					<emailRecipients objectType="array">
						<item objectType = "KalturaEmailNotificationRecipient">
							<email objectType="KalturaStringValue">
								<value>{to_email_admin}</value>
							</email>
							<name objectType="KalturaStringValue">
								<value>{to_email_admin}</value>
							</name>
						</item>
						<item objectType = "KalturaEmailNotificationRecipient">
							<email objectType="KalturaStringValue">
								<value>{to_email_user}</value>
							</email>
							<name objectType="KalturaStringValue">
								<value>{to_email_user}</value>
							</name>
						</item>
					</emailRecipients>
				</to>
				<contentParameters objectType="array">
					<item objectType="KalturaEventNotificationParameter">
						<key>job_id</key>
						<description>Batch Job ID</description>
						<value objectType="KalturaEvalStringField">
							<code>$scope->getEvent()->getBatchJob()->getId()</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>log_url</key>
						<description>Bulk upload log url</description>
						<value objectType="KalturaEvalStringField">
							<code>kFlowHelper::createBulkUploadLogUrl($scope->getEvent()->getBatchJob())</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>date_time</key>
						<description>Bulk upload creation time</description>
						<value objectType="KalturaEvalStringField">
							<code>$scope->getEvent()->getBatchJob()->getCreatedAt()</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>from_email</key>
						<description>Sender email</description>
						<value objectType="KalturaEvalStringField">
							<code>kConf::get("batch_alert_email")</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>from_name</key>
						<description>Sender name</description>
						<value objectType="KalturaEvalStringField">
							<code>kConf::get("batch_alert_name")</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>to_email_admin</key>
						<description>Recepient admin email</description>
						<value objectType="KalturaEvalStringField">
							<code>$scope->getEvent()->getBatchJob()->getPartner()->getAdminEmail()</code>
						</value>
					</item>	
					<item objectType="KalturaEventNotificationParameter">
						<key>to_email_user</key>
						<description>Recepient user email</description>
						<value objectType="KalturaEvalStringField">
							<code>kuserPeer::getKuserByPartnerAndUid($scope->getPartnerId(), $scope->getEvent()->getBatchJob()->getData()->getUserId())->getEmail()</code>
						</value>
					</item>	
				</contentParameters>
			</template>
		</request>
		<request service="eventNotificationTemplate" action="updateStatus" plugin="eventNotification" partnerId="0">
			<id>{1:result:id}</id>
			<status>1</status><!-- EventNotificationTemplateStatus::DISABLED -->
		</request>
	</multirequest>	
	<multirequest>
		<request service="eventNotificationTemplate" action="add" plugin="eventNotification" partnerId="0">
			<template objectType="KalturaEmailNotificationTemplate">
				<name>End-Users CSV - Bulk Job Failed</name>
				<systemName>Users_CSV_Bulk_Failure_Notification</systemName>
				<description>Email notification template for End-Users CSV Bulk Upload failure.</description>
				<automaticDispatchEnabled>1</automaticDispatchEnabled>
				<eventType>1</eventType> 
				<eventObjectType>10</eventObjectType>
				<eventConditions objectType="array">
					<item objectType="KalturaEventFieldCondition">
						<description>Batch job of type Bulk Upload</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getJobType() == BatchJobType::BULKUPLOAD</code>
						</field>
					</item>
					<item objectType="KalturaEventFieldCondition">
						<description>Bulk Upload type CSV</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getJobSubType() == BulkUploadCsvPlugin::getBulkUploadTypeCoreValue(BulkUploadCsvType::CSV)</code>
						</field>
					</item>
					<item objectType="KalturaEventFieldCondition">
						<description>User object uploaded</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getData()->getBulkUploadObjectType() == BulkUploadObjectType::USER</code>
						</field>
					</item>
					<item objectType="KalturaEventFieldCondition">
						<description>Bulk Upload failed</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getStatus() == BatchJob::BATCHJOB_STATUS_FAILED</code>
						</field>
					</item>
				</eventConditions>
				<format>1</format>
				<subject>End-Users CSV - Bulk Job Failed</subject>
				<body><![CDATA[ Hello,<p>The processing of your bulk job has failed.</p><p>Bulk Job ID = {job_id} <br>Job Submission Date/Time:  {date_time}</p><p>More details are available in the log file, at: <a href={log_url}>{log_url}</a></p><p>Kaltura Customer Service</p>]]></body>
				<fromEmail>{from_email}</fromEmail>
				<fromName>{from_name}</fromName>
				<to objectType="KalturaEmailNotificationStaticRecipientProvider">
					<emailRecipients objectType="array">
						<item objectType = "KalturaEmailNotificationRecipient">
							<email objectType="KalturaStringValue">
								<value>{to_email_admin}</value>
							</email>
							<name objectType="KalturaStringValue">
								<value>{to_email_admin}</value>
							</name>
						</item>
						<item objectType = "KalturaEmailNotificationRecipient">
							<email objectType="KalturaStringValue">
								<value>{to_email_user}</value>
							</email>
							<name objectType="KalturaStringValue">
								<value>{to_email_user}</value>
							</name>
						</item>
					</emailRecipients>
				</to>
				<contentParameters objectType="array">
					<item objectType="KalturaEventNotificationParameter">
						<key>job_id</key>
						<description>Batch Job ID</description>
						<value objectType="KalturaEvalStringField">
							<code>$scope->getEvent()->getBatchJob()->getId()</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>log_url</key>
						<description>Bulk upload log url</description>
						<value objectType="KalturaEvalStringField">
							<code>kFlowHelper::createBulkUploadLogUrl($scope->getEvent()->getBatchJob())</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>date_time</key>
						<description>Bulk upload creation time</description>
						<value objectType="KalturaEvalStringField">
							<code>$scope->getEvent()->getBatchJob()->getCreatedAt()</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>from_email</key>
						<value objectType="KalturaEvalStringField">
							<code>kConf::get("batch_alert_email")</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>from_name</key>
						<description>Sender name</description>
						<value objectType="KalturaEvalStringField">
							<code>kConf::get("batch_alert_name")</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>to_email_admin</key>
						<description>Recepient admin email</description>
						<value objectType="KalturaEvalStringField">
							<code>$scope->getEvent()->getBatchJob()->getPartner()->getAdminEmail()</code>
						</value>
					</item>	
					<item objectType="KalturaEventNotificationParameter">
						<key>to_email_user</key>
						<description>Recepient user email</description>
						<value objectType="KalturaEvalStringField">
							<code>kuserPeer::getKuserByPartnerAndUid($scope->getPartnerId(), $scope->getEvent()->getBatchJob()->getData()->getUserId())->getEmail()</code>
						</value>
					</item>	
				</contentParameters>
			</template>
		</request>
		<request service="eventNotificationTemplate" action="updateStatus" plugin="eventNotification" partnerId="0">
			<id>{1:result:id}</id>
			<status>1</status><!-- EventNotificationTemplateStatus::DISABLED -->
		</request>
	</multirequest>	
	<multirequest>
		<request service="eventNotificationTemplate" action="add" plugin="eventNotification" partnerId="0">
			<template objectType="KalturaEmailNotificationTemplate">
				<name>End-User Entitlements CSV - Bulk Job Completed Successfully</name>
				<systemName>Users_Category_CSV_Bulk_Success_Notification</systemName>
				<description>Email notification template for End-User Entitlements CSV Bulk Upload successful completion.</description>
				<automaticDispatchEnabled>1</automaticDispatchEnabled>
				<eventType>1</eventType> 
				<eventObjectType>10</eventObjectType>
				<eventConditions objectType="array">
					<item objectType="KalturaEventFieldCondition">
						<description>Batch job of type Bulk Upload</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getJobType() == BatchJobType::BULKUPLOAD</code>
						</field>
					</item>
					<item objectType="KalturaEventFieldCondition">
						<description>Bulk Upload type CSV</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getJobSubType() == BulkUploadCsvPlugin::getBulkUploadTypeCoreValue(BulkUploadCsvType::CSV)</code>
						</field>
					</item>
					<item objectType="KalturaEventFieldCondition">
						<description>Category User object uploaded</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getData()->getBulkUploadObjectType() == BulkUploadObjectType::CATEGORY_USER</code>
						</field>
					</item>
					<item objectType="KalturaEventFieldCondition">
						<description>Bulk Upload finished successfully</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getStatus() == BatchJob::BATCHJOB_STATUS_FINISHED</code>
						</field>
					</item>
				</eventConditions>
				<format>1</format>
				<subject>End-User Entitlements CSV - Bulk Job Completed Successfully</subject>
				<body><![CDATA[ Hello,<p>The processing of your bulk job has been completed successfully.</p><p>Bulk Job ID = {job_id} <br>Job Submission Date/Time:  {date_time}</p><p>More details are available in the log file, at: <a href={log_url}>{log_url}</a></p><p>Kaltura Customer Service</p>]]></body>
				<fromEmail>{from_email}</fromEmail>
				<fromName>{from_name}</fromName>
				<to objectType="KalturaEmailNotificationStaticRecipientProvider">
					<emailRecipients objectType="array">
						<item objectType = "KalturaEmailNotificationRecipient">
							<email objectType="KalturaStringValue">
								<value>{to_email_admin}</value>
							</email>
							<name objectType="KalturaStringValue">
								<value>{to_email_admin}</value>
							</name>
						</item>
						<item objectType = "KalturaEmailNotificationRecipient">
							<email objectType="KalturaStringValue">
								<value>{to_email_user}</value>
							</email>
							<name objectType="KalturaStringValue">
								<value>{to_email_user}</value>
							</name>
						</item>
					</emailRecipients>
				</to>
				<contentParameters objectType="array">
					<item objectType="KalturaEventNotificationParameter">
						<key>job_id</key>
						<description>Batch Job ID</description>
						<value objectType="KalturaEvalStringField">
							<code>$scope->getEvent()->getBatchJob()->getId()</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>log_url</key>
						<description>Bulk upload log url</description>
						<value objectType="KalturaEvalStringField">
							<code>kFlowHelper::createBulkUploadLogUrl($scope->getEvent()->getBatchJob())</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>date_time</key>
						<description>Bulk upload creation time</description>
						<value objectType="KalturaEvalStringField">
							<code>$scope->getEvent()->getBatchJob()->getCreatedAt()</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>from_email</key>
						<description>Sender email</description>
						<value objectType="KalturaEvalStringField">
							<code>kConf::get("batch_alert_email")</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>from_name</key>
						<description>Sender name</description>
						<value objectType="KalturaEvalStringField">
							<code>kConf::get("batch_alert_name")</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>to_email_admin</key>
						<description>Recepient admin email</description>
						<value objectType="KalturaEvalStringField">
							<code>$scope->getEvent()->getBatchJob()->getPartner()->getAdminEmail()</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>to_email_user</key>
						<description>Recepient user email</description>
						<value objectType="KalturaEvalStringField">
							<code>kuserPeer::getKuserByPartnerAndUid($scope->getPartnerId(), $scope->getEvent()->getBatchJob()->getData()->getUserId())->getEmail()</code>
						</value>
					</item>	
				</contentParameters>
			</template>
		</request>
		<request service="eventNotificationTemplate" action="updateStatus" plugin="eventNotification" partnerId="0">
			<id>{1:result:id}</id>
			<status>1</status><!-- EventNotificationTemplateStatus::DISABLED -->
		</request>
	</multirequest>
	<multirequest>
		<request service="eventNotificationTemplate" action="add" plugin="eventNotification" partnerId="0">
			<template objectType="KalturaEmailNotificationTemplate">
				<name>End-User Entitlements CSV - Bulk Job Completed with Errors</name>
				<systemName>Users_Category_CSV_Bulk_Error_Notification</systemName>
				<description>Email notification template for End-User Entitlements CSV Bulk Upload completion with errors.</description>
				<automaticDispatchEnabled>1</automaticDispatchEnabled>
				<eventType>1</eventType> 
				<eventObjectType>10</eventObjectType>
				<eventConditions objectType="array">
					<item objectType="KalturaEventFieldCondition">
						<description>Batch job of type Bulk Upload</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getJobType() == BatchJobType::BULKUPLOAD</code>
						</field>
					</item>
					<item objectType="KalturaEventFieldCondition">
						<description>Bulk Upload type CSV</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getJobSubType() == BulkUploadCsvPlugin::getBulkUploadTypeCoreValue(BulkUploadCsvType::CSV)</code>
						</field>
					</item>
					<item objectType="KalturaEventFieldCondition">
						<description>User Entitlement object uploaded</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getData()->getBulkUploadObjectType() == BulkUploadObjectType::CATEGORY_USER</code>
						</field>
					</item>
					<item objectType="KalturaEventFieldCondition">
						<description>Bulk Upload finished with errors</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getStatus() == BatchJob::BATCHJOB_STATUS_FINISHED_PARTIALLY</code>
						</field>
					</item>
				</eventConditions>
				<format>1</format>
				<subject>End-User Entitlements CSV - Bulk Job Completed with Errors</subject>
				<body><![CDATA[ Hello,<p>The processing of your bulk job has been completed, but with some errors.</p><p>Bulk Job ID = {job_id} <br>Job Submission Date/Time:  {date_time}</p><p>More details are available in the log file, at: <a href={log_url}>{log_url}</a></p><p>Kaltura Customer Service</p>]]></body>
				<fromEmail>{from_email}</fromEmail>
				<fromName>{from_name}</fromName>
				<to objectType="KalturaEmailNotificationStaticRecipientProvider">
					<emailRecipients objectType="array">
						<item objectType = "KalturaEmailNotificationRecipient">
							<email objectType="KalturaStringValue">
								<value>{to_email_admin}</value>
							</email>
							<name objectType="KalturaStringValue">
								<value>{to_email_admin}</value>
							</name>
						</item>
						<item objectType = "KalturaEmailNotificationRecipient">
							<email objectType="KalturaStringValue">
								<value>{to_email_user}</value>
							</email>
							<name objectType="KalturaStringValue">
								<value>{to_email_user}</value>
							</name>
						</item>
					</emailRecipients>
				</to>
				<contentParameters objectType="array">
					<item objectType="KalturaEventNotificationParameter">
						<key>job_id</key>
						<description>Batch Job ID</description>
						<value objectType="KalturaEvalStringField">
							<code>$scope->getEvent()->getBatchJob()->getId()</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>log_url</key>
						<description>Bulk upload log url</description>
						<value objectType="KalturaEvalStringField">
							<code>kFlowHelper::createBulkUploadLogUrl($scope->getEvent()->getBatchJob())</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>date_time</key>
						<description>Bulk upload creation time</description>
						<value objectType="KalturaEvalStringField">
							<code>$scope->getEvent()->getBatchJob()->getCreatedAt()</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>from_email</key>
						<description>Sender email</description>
						<value objectType="KalturaEvalStringField">
							<code>kConf::get("batch_alert_email")</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>from_name</key>
						<description>Sender name</description>
						<value objectType="KalturaEvalStringField">
							<code>kConf::get("batch_alert_name")</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>to_email_admin</key>
						<description>Recepient admin email</description>
						<value objectType="KalturaEvalStringField">
							<code>$scope->getEvent()->getBatchJob()->getPartner()->getAdminEmail()</code>
						</value>
					</item>	
					<item objectType="KalturaEventNotificationParameter">
						<key>to_email_user</key>
						<description>Recepient user email</description>
						<value objectType="KalturaEvalStringField">
							<code>kuserPeer::getKuserByPartnerAndUid($scope->getPartnerId(), $scope->getEvent()->getBatchJob()->getData()->getUserId())->getEmail()</code>
						</value>
					</item>	
				</contentParameters>
			</template>
		</request>
		<request service="eventNotificationTemplate" action="updateStatus" plugin="eventNotification" partnerId="0">
			<id>{1:result:id}</id>
			<status>1</status><!-- EventNotificationTemplateStatus::DISABLED -->
		</request>
	</multirequest>
	<multirequest>
		<request service="eventNotificationTemplate" action="add" plugin="eventNotification" partnerId="0">
			<template objectType="KalturaEmailNotificationTemplate">
				<name>End-User Entitlements CSV - Bulk Job Failed</name>
				<systemName>Users_Category_CSV_Bulk_Failure_Notification</systemName>
				<description>Email notification template for End-User Entitlements CSV Bulk Upload failure.</description>
				<automaticDispatchEnabled>1</automaticDispatchEnabled>
				<eventType>1</eventType> 
				<eventObjectType>10</eventObjectType>
				<eventConditions objectType="array">
					<item objectType="KalturaEventFieldCondition">
						<description>Batch job of type Bulk Upload</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getJobType() == BatchJobType::BULKUPLOAD</code>
						</field>
					</item>
					<item objectType="KalturaEventFieldCondition">
						<description>Bulk Upload type CSV</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getJobSubType() == BulkUploadCsvPlugin::getBulkUploadTypeCoreValue(BulkUploadCsvType::CSV)</code>
						</field>
					</item>
					<item objectType="KalturaEventFieldCondition">
						<description>User Entitlement object uploaded</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getData()->getBulkUploadObjectType() == BulkUploadObjectType::CATEGORY_USER</code>
						</field>
					</item>
					<item objectType="KalturaEventFieldCondition">
						<description>Bulk Upload failed</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getStatus() == BatchJob::BATCHJOB_STATUS_FAILED</code>
						</field>
					</item>
				</eventConditions>
				<format>1</format>
				<subject>End-User Entitlements CSV - Bulk Job Failed</subject>
				<body><![CDATA[ Hello,<p>The processing of your bulk job has failed.</p><p>Bulk Job ID = {job_id} <br>Job Submission Date/Time:  {date_time}</p><p>More details are available in the log file, at: <a href={log_url}>{log_url}</a></p><p>Kaltura Customer Service</p>]]></body>
				<fromEmail>{from_email}</fromEmail>
				<fromName>{from_name}</fromName>
				<to objectType="KalturaEmailNotificationStaticRecipientProvider">
					<emailRecipients objectType="array">
						<item objectType = "KalturaEmailNotificationRecipient">
							<email objectType="KalturaStringValue">
								<value>{to_email_admin}</value>
							</email>
							<name objectType="KalturaStringValue">
								<value>{to_email_admin}</value>
							</name>
						</item>
						<item objectType = "KalturaEmailNotificationRecipient">
							<email objectType="KalturaStringValue">
								<value>{to_email_user}</value>
							</email>
							<name objectType="KalturaStringValue">
								<value>{to_email_user}</value>
							</name>
						</item>
					</emailRecipients>
				</to>
				<contentParameters objectType="array">
					<item objectType="KalturaEventNotificationParameter">
						<key>job_id</key>
						<description>Batch Job ID</description>
						<value objectType="KalturaEvalStringField">
							<code>$scope->getEvent()->getBatchJob()->getId()</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>log_url</key>
						<description>Bulk upload log url</description>
						<value objectType="KalturaEvalStringField">
							<code>kFlowHelper::createBulkUploadLogUrl($scope->getEvent()->getBatchJob())</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>date_time</key>
						<description>Bulk upload creation time</description>
						<value objectType="KalturaEvalStringField">
							<code>$scope->getEvent()->getBatchJob()->getCreatedAt()</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>from_email</key>
						<description>Sender email</description>
						<value objectType="KalturaEvalStringField">
							<code>kConf::get("batch_alert_email")</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>from_name</key>
						<description>Sender name</description>
						<value objectType="KalturaEvalStringField">
							<code>kConf::get("batch_alert_name")</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>to_email_admin</key>
						<description>Recepient admin email</description>
						<value objectType="KalturaEvalStringField">
							<code>$scope->getEvent()->getBatchJob()->getPartner()->getAdminEmail()</code>
						</value>
					</item>	
					<item objectType="KalturaEventNotificationParameter">
						<key>to_email_user</key>
						<description>Recepient user email</description>
						<value objectType="KalturaEvalStringField">
							<code>kuserPeer::getKuserByPartnerAndUid($scope->getPartnerId(), $scope->getEvent()->getBatchJob()->getData()->getUserId())->getEmail()</code>
						</value>
					</item>	
				</contentParameters>
			</template>
		</request>	
		<request service="eventNotificationTemplate" action="updateStatus" plugin="eventNotification" partnerId="0">
			<id>{1:result:id}</id>
			<status>1</status><!-- EventNotificationTemplateStatus::DISABLED -->
		</request>
	</multirequest>
	<multirequest>
		<request service="eventNotificationTemplate" action="add" plugin="eventNotification" partnerId="0">
			<template objectType="KalturaEmailNotificationTemplate">
				<name>Media CSV - Bulk Job Completed Successfully</name>
				<systemName>Media_CSV_Bulk_Success_Notification</systemName>
				<description>Email notification template for Media CSV Bulk Upload successful completion.</description>
				<automaticDispatchEnabled>1</automaticDispatchEnabled>
				<eventType>1</eventType> 
				<eventObjectType>10</eventObjectType>
				<eventConditions objectType="array">
					<item objectType="KalturaEventFieldCondition">
						<description>Batch job of type Bulk Upload</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getJobType() == BatchJobType::BULKUPLOAD</code>
						</field>
					</item>
					<item objectType="KalturaEventFieldCondition">
						<description>Bulk Upload type CSV</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getJobSubType() == BulkUploadCsvPlugin::getBulkUploadTypeCoreValue(BulkUploadCsvType::CSV)</code>
						</field>
					</item>
					<item objectType="KalturaEventFieldCondition">
						<description>Media object uploaded</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getData()->getBulkUploadObjectType() == BulkUploadObjectType::ENTRY</code>
						</field>
					</item>
					<item objectType="KalturaEventFieldCondition">
						<description>Bulk Upload finished successfully</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getStatus() == BatchJob::BATCHJOB_STATUS_FINISHED</code>
						</field>
					</item>
				</eventConditions>
				<format>1</format>
				<subject>Media CSV - Bulk Job Completed Successfully</subject>
				<body><![CDATA[ Hello,<p>The processing of your bulk job has been completed successfully.</p><p>Bulk Job ID = {job_id} <br>Job Submission Date/Time:  {date_time}</p><p>More details are available in the log file, at: <a href={log_url}>{log_url}</a></p><p>Kaltura Customer Service</p>]]></body>
				<fromEmail>{from_email}</fromEmail>
				<fromName>{from_name}</fromName>
				<to objectType="KalturaEmailNotificationStaticRecipientProvider">
					<emailRecipients objectType="array">
						<item objectType = "KalturaEmailNotificationRecipient">
							<email objectType="KalturaStringValue">
								<value>{to_email_admin}</value>
							</email>
							<name objectType="KalturaStringValue">
								<value>{to_email_admin}</value>
							</name>
						</item>
						<item objectType = "KalturaEmailNotificationRecipient">
							<email objectType="KalturaStringValue">
								<value>{to_email_user}</value>
							</email>
							<name objectType="KalturaStringValue">
								<value>{to_email_user}</value>
							</name>
						</item>
					</emailRecipients>
				</to>
				<contentParameters objectType="array">
					<item objectType="KalturaEventNotificationParameter">
						<key>job_id</key>
						<description>Batch Job ID</description>
						<value objectType="KalturaEvalStringField">
							<code>$scope->getEvent()->getBatchJob()->getId()</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>log_url</key>
						<description>Bulk upload log url</description>
						<value objectType="KalturaEvalStringField">
							<code>kFlowHelper::createBulkUploadLogUrl($scope->getEvent()->getBatchJob())</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>date_time</key>
						<description>Bulk upload creation time</description>
						<value objectType="KalturaEvalStringField">
							<code>$scope->getEvent()->getBatchJob()->getCreatedAt()</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>from_email</key>
						<description>Sender email</description>
						<value objectType="KalturaEvalStringField">
							<code>kConf::get("batch_alert_email")</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>from_name</key>
						<description>Sender name</description>
						<value objectType="KalturaEvalStringField">
							<code>kConf::get("batch_alert_name")</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>to_email_admin</key>
						<description>Recepient admin email</description>
						<value objectType="KalturaEvalStringField">
							<code>$scope->getEvent()->getBatchJob()->getPartner()->getAdminEmail()</code>
						</value>
					</item>	
					<item objectType="KalturaEventNotificationParameter">
						<key>to_email_user</key>
						<description>Recepient user email</description>
						<value objectType="KalturaEvalStringField">
							<code>kuserPeer::getKuserByPartnerAndUid($scope->getPartnerId(), $scope->getEvent()->getBatchJob()->getData()->getUserId())->getEmail()</code>
						</value>
					</item>	
				</contentParameters>
			</template>
		</request>
		<request service="eventNotificationTemplate" action="updateStatus" plugin="eventNotification" partnerId="0">
			<id>{1:result:id}</id>
			<status>1</status><!-- EventNotificationTemplateStatus::DISABLED -->
		</request>
	</multirequest>
	<multirequest>
		<request service="eventNotificationTemplate" action="add" plugin="eventNotification" partnerId="0">
			<template objectType="KalturaEmailNotificationTemplate">
				<name>Media CSV - Bulk Job Completed with Errors</name>
				<systemName>Media_CSV_Bulk_Error_Notification</systemName>
				<description>Email notification template for Media CSV Bulk Upload completion with errors.</description>
				<automaticDispatchEnabled>1</automaticDispatchEnabled>
				<eventType>1</eventType> 
				<eventObjectType>10</eventObjectType>
				<eventConditions objectType="array">
					<item objectType="KalturaEventFieldCondition">
						<description>Batch job of type Bulk Upload</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getJobType() == BatchJobType::BULKUPLOAD</code>
						</field>
					</item>
					<item objectType="KalturaEventFieldCondition">
						<description>Bulk Upload type CSV</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getJobSubType() == BulkUploadCsvPlugin::getBulkUploadTypeCoreValue(BulkUploadCsvType::CSV)</code>
						</field>
					</item>
					<item objectType="KalturaEventFieldCondition">
						<description>Media object uploaded</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getData()->getBulkUploadObjectType() == BulkUploadObjectType::ENTRY</code>
						</field>
					</item>
					<item objectType="KalturaEventFieldCondition">
						<description>Bulk Upload finished with errors</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getStatus() == BatchJob::BATCHJOB_STATUS_FINISHED_PARTIALLY</code>
						</field>
					</item>
				</eventConditions>
				<format>1</format>
				<subject>Media CSV - Bulk Job Completed with Errors</subject>
				<body><![CDATA[ Hello,<p>The processing of your bulk job has been completed, but with some errors.</p><p>Bulk Job ID = {job_id} <br>Job Submission Date/Time:  {date_time}</p><p>More details are available in the log file, at: <a href={log_url}>{log_url}</a></p><p>Kaltura Customer Service</p>]]></body>
				<fromEmail>{from_email}</fromEmail>
				<fromName>{from_name}</fromName>
				<to objectType="KalturaEmailNotificationStaticRecipientProvider">
					<emailRecipients objectType="array">
						<item objectType = "KalturaEmailNotificationRecipient">
							<email objectType="KalturaStringValue">
								<value>{to_email_admin}</value>
							</email>
							<name objectType="KalturaStringValue">
								<value>{to_email_admin}</value>
							</name>
						</item>
						<item objectType = "KalturaEmailNotificationRecipient">
							<email objectType="KalturaStringValue">
								<value>{to_email_user}</value>
							</email>
							<name objectType="KalturaStringValue">
								<value>{to_email_user}</value>
							</name>
						</item>
					</emailRecipients>
				</to>
				<contentParameters objectType="array">
					<item objectType="KalturaEventNotificationParameter">
						<key>job_id</key>
						<description>Batch Job ID</description>
						<value objectType="KalturaEvalStringField">
							<code>$scope->getEvent()->getBatchJob()->getId()</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>log_url</key>
						<description>Bulk upload log url</description>
						<value objectType="KalturaEvalStringField">
							<code>kFlowHelper::createBulkUploadLogUrl($scope->getEvent()->getBatchJob())</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>date_time</key>
						<description>Bulk upload creation time</description>
						<value objectType="KalturaEvalStringField">
							<code>$scope->getEvent()->getBatchJob()->getCreatedAt()</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>from_email</key>
						<description>Sender email</description>
						<value objectType="KalturaEvalStringField">
							<code>kConf::get("batch_alert_email")</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>from_name</key>
						<description>Sender name</description>
						<value objectType="KalturaEvalStringField">
							<code>kConf::get("batch_alert_name")</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>to_email_admin</key>
						<description>Recepient admin email</description>
						<value objectType="KalturaEvalStringField">
							<code>$scope->getEvent()->getBatchJob()->getPartner()->getAdminEmail()</code>
						</value>
					</item>	
					<item objectType="KalturaEventNotificationParameter">
						<key>to_email_user</key>
						<description>Recepient user email</description>
						<value objectType="KalturaEvalStringField">
							<code>kuserPeer::getKuserByPartnerAndUid($scope->getPartnerId(), $scope->getEvent()->getBatchJob()->getData()->getUserId())->getEmail()</code>
						</value>
					</item>	
				</contentParameters>
			</template>
		</request>
		<request service="eventNotificationTemplate" action="updateStatus" plugin="eventNotification" partnerId="0">
			<id>{1:result:id}</id>
			<status>1</status><!-- EventNotificationTemplateStatus::DISABLED -->
		</request>
	</multirequest>
	<multirequest>
		<request service="eventNotificationTemplate" action="add" plugin="eventNotification" partnerId="0">
			<template objectType="KalturaEmailNotificationTemplate">
				<name>Media CSV - Bulk Job Failed</name>
				<systemName>Media_CSV_Bulk_Failure_Notification</systemName>
				<description>Email notification template for Media CSV Bulk Upload failure.</description>
				<automaticDispatchEnabled>1</automaticDispatchEnabled>
				<eventType>1</eventType> 
				<eventObjectType>10</eventObjectType>
				<eventConditions objectType="array">
					<item objectType="KalturaEventFieldCondition">
						<description>Batch job of type Bulk Upload</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getJobType() == BatchJobType::BULKUPLOAD</code>
						</field>
					</item>
					<item objectType="KalturaEventFieldCondition">
						<description>Bulk Upload type CSV</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getJobSubType() == BulkUploadCsvPlugin::getBulkUploadTypeCoreValue(BulkUploadCsvType::CSV)</code>
						</field>
					</item>
					<item objectType="KalturaEventFieldCondition">
						<description>Media object uploaded</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getData()->getBulkUploadObjectType() == BulkUploadObjectType::ENTRY</code>
						</field>
					</item>
					<item objectType="KalturaEventFieldCondition">
						<description>Bulk Upload failed</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getStatus() == BatchJob::BATCHJOB_STATUS_FAILED</code>
						</field>
					</item>
				</eventConditions>
				<format>1</format>
				<subject>Media CSV - Bulk Job Failed</subject>
				<body><![CDATA[ Hello,<p>The processing of your bulk job has failed.</p><p>Bulk Job ID = {job_id} <br>Job Submission Date/Time:  {date_time}</p><p>More details are available in the log file, at: <a href={log_url}>{log_url}</a></p><p>Kaltura Customer Service</p>]]></body>
				<fromEmail>{from_email}</fromEmail>
				<fromName>{from_name}</fromName>
				<to objectType="KalturaEmailNotificationStaticRecipientProvider">
					<emailRecipients objectType="array">
						<item objectType = "KalturaEmailNotificationRecipient">
							<email objectType="KalturaStringValue">
								<value>{to_email_admin}</value>
							</email>
							<name objectType="KalturaStringValue">
								<value>{to_email_admin}</value>
							</name>
						</item>
						<item objectType = "KalturaEmailNotificationRecipient">
							<email objectType="KalturaStringValue">
								<value>{to_email_user}</value>
							</email>
							<name objectType="KalturaStringValue">
								<value>{to_email_user}</value>
							</name>
						</item>
					</emailRecipients>
				</to>
				<contentParameters objectType="array">
					<item objectType="KalturaEventNotificationParameter">
						<key>job_id</key>
						<description>Batch Job ID</description>
						<value objectType="KalturaEvalStringField">
							<code>$scope->getEvent()->getBatchJob()->getId()</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>log_url</key>
						<description>Bulk upload log url</description>
						<value objectType="KalturaEvalStringField">
							<code>kFlowHelper::createBulkUploadLogUrl($scope->getEvent()->getBatchJob())</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>date_time</key>
						<description>Bulk upload creation time</description>
						<value objectType="KalturaEvalStringField">
							<code>$scope->getEvent()->getBatchJob()->getCreatedAt()</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>from_email</key>
						<description>Sender email</description>
						<value objectType="KalturaEvalStringField">
							<code>kConf::get("batch_alert_email")</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>from_name</key>
						<description>Sender name</description>
						<value objectType="KalturaEvalStringField">
							<code>kConf::get("batch_alert_name")</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>to_email_admin</key>
						<description>Recepient admin email</description>
						<value objectType="KalturaEvalStringField">
							<code>$scope->getEvent()->getBatchJob()->getPartner()->getAdminEmail()</code>
						</value>
					</item>	
					<item objectType="KalturaEventNotificationParameter">
						<key>to_email_user</key>
						<description>Recepient user email</description>
						<value objectType="KalturaEvalStringField">
							<code>kuserPeer::getKuserByPartnerAndUid($scope->getPartnerId(), $scope->getEvent()->getBatchJob()->getData()->getUserId())->getEmail()</code>
						</value>
					</item>	
				</contentParameters>
			</template>
		</request>
		<request service="eventNotificationTemplate" action="updateStatus" plugin="eventNotification" partnerId="0">
			<id>{1:result:id}</id>
			<status>1</status><!-- EventNotificationTemplateStatus::DISABLED -->
		</request>
	</multirequest>
	<multirequest>
		<request service="eventNotificationTemplate" action="add" plugin="eventNotification" partnerId="0">
			<template objectType="KalturaEmailNotificationTemplate">
				<name>Media XML - Bulk Job Completed Successfully</name>
				<systemName>Media_XML_Bulk_Success_Notification</systemName>
				<description>Email notification template for Media XML Bulk Upload successful completion.</description>
				<automaticDispatchEnabled>1</automaticDispatchEnabled>
				<eventType>1</eventType> 
				<eventObjectType>10</eventObjectType>
				<eventConditions objectType="array">
					<item objectType="KalturaEventFieldCondition">
						<description>Batch job of type Bulk Upload</description> 
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getJobType() == BatchJobType::BULKUPLOAD</code>
						</field>
					</item>
					<item objectType="KalturaEventFieldCondition">
						<description>Bulk Upload type XML</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getJobSubType() == BulkUploadXmlPlugin::getBulkUploadTypeCoreValue(BulkUploadXmlType::XML)</code>
						</field>
					</item>
					<item objectType="KalturaEventFieldCondition">
						<description>Media object uploaded</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getData()->getBulkUploadObjectType() == BulkUploadObjectType::ENTRY</code>
						</field>
					</item>
					<item objectType="KalturaEventFieldCondition">
						<description>Bulk Upload finished successfully</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getStatus() == BatchJob::BATCHJOB_STATUS_FINISHED</code>
						</field>
					</item>
				</eventConditions>
				<format>1</format>
				<subject>Media XML - Bulk Job Completed Successfully</subject>
				<body><![CDATA[ Hello,<p>The processing of your bulk job has been completed successfully.</p><p>Bulk Job ID = {job_id} <br>Job Submission Date/Time:  {date_time}</p><p>More details are available in the log file, at: <a href={log_url}>{log_url}</a></p><p>Kaltura Customer Service</p>]]></body>
				<fromEmail>{from_email}</fromEmail>
				<fromName>{from_name}</fromName>
				<to objectType="KalturaEmailNotificationStaticRecipientProvider">
					<emailRecipients objectType="array">
						<item objectType = "KalturaEmailNotificationRecipient">
							<email objectType="KalturaStringValue">
								<value>{to_email_admin}</value>
							</email>
							<name objectType="KalturaStringValue">
								<value>{to_email_admin}</value>
							</name>
						</item>
						<item objectType = "KalturaEmailNotificationRecipient">
							<email objectType="KalturaStringValue">
								<value>{to_email_user}</value>
							</email>
							<name objectType="KalturaStringValue">
								<value>{to_email_user}</value>
							</name>
						</item>
					</emailRecipients>
				</to>
				<contentParameters objectType="array">
					<item objectType="KalturaEventNotificationParameter">
						<key>job_id</key>
						<description>Batch Job ID</description>
						<value objectType="KalturaEvalStringField">
							<code>$scope->getEvent()->getBatchJob()->getId()</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>log_url</key>
						<description>Bulk upload log url</description>
						<value objectType="KalturaEvalStringField">
							<code>kFlowHelper::createBulkUploadLogUrl($scope->getEvent()->getBatchJob())</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>date_time</key>
						<description>Bulk upload creation time</description>
						<value objectType="KalturaEvalStringField">
							<code>$scope->getEvent()->getBatchJob()->getCreatedAt()</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>from_email</key>
						<description>Sender email</description>
						<value objectType="KalturaEvalStringField">
							<code>kConf::get("batch_alert_email")</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>from_name</key>
						<description>Sender name</description>
						<value objectType="KalturaEvalStringField">
							<code>kConf::get("batch_alert_name")</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>to_email_admin</key>
						<description>Recepient admin email</description>
						<value objectType="KalturaEvalStringField">
							<code>$scope->getEvent()->getBatchJob()->getPartner()->getAdminEmail()</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>to_email_user</key>
						<description>Recepient user email</description>
						<value objectType="KalturaEvalStringField">
							<code>kuserPeer::getKuserByPartnerAndUid($scope->getPartnerId(), $scope->getEvent()->getBatchJob()->getData()->getUserId())->getEmail()</code>
						</value>
					</item>	
				</contentParameters>
			</template>
		</request>
		<request service="eventNotificationTemplate" action="updateStatus" plugin="eventNotification" partnerId="0">
			<id>{1:result:id}</id>
			<status>1</status><!-- EventNotificationTemplateStatus::DISABLED -->
		</request>
	</multirequest>
	<multirequest>
		<request service="eventNotificationTemplate" action="add" plugin="eventNotification" partnerId="0">
			<template objectType="KalturaEmailNotificationTemplate">
				<name>Media XML - Bulk Job Completed with Errors</name>
				<systemName>Media_XML_Bulk_Error_Notification</systemName>
				<description>Email notification template for Media XML Bulk Upload completion with errors.</description>
				<automaticDispatchEnabled>1</automaticDispatchEnabled>
				<eventType>1</eventType> 
				<eventObjectType>10</eventObjectType>
				<eventConditions objectType="array">
					<item objectType="KalturaEventFieldCondition">
						<description>Batch job of type Bulk Upload</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getJobType() == BatchJobType::BULKUPLOAD</code>
						</field>
					</item>
					<item objectType="KalturaEventFieldCondition">
						<description>Bulk Upload type XML</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getJobSubType() == BulkUploadXmlPlugin::getBulkUploadTypeCoreValue(BulkUploadXmlType::XML)</code>
						</field>
					</item>
					<item objectType="KalturaEventFieldCondition">
						<description>Media object uploaded</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getData()->getBulkUploadObjectType() == BulkUploadObjectType::ENTRY</code>
						</field>
					</item>
					<item objectType="KalturaEventFieldCondition">
						<description>Bulk Upload finished with errors</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getStatus() == BatchJob::BATCHJOB_STATUS_FINISHED_PARTIALLY</code>
						</field>
					</item>
				</eventConditions>
				<format>1</format>
				<subject>Media XML - Bulk Job Completed with Errors</subject>
				<body><![CDATA[ Hello,<p>The processing of your bulk job has been completed, but with some errors.</p><p>Bulk Job ID = {job_id} <br>Job Submission Date/Time:  {date_time}</p><p>More details are available in the log file, at: <a href={log_url}>{log_url}</a></p><p>Kaltura Customer Service</p>]]></body>
				<fromEmail>{from_email}</fromEmail>
				<fromName>{from_name}</fromName>
				<to objectType="KalturaEmailNotificationStaticRecipientProvider">
					<emailRecipients objectType="array">
						<item objectType = "KalturaEmailNotificationRecipient">
							<email objectType="KalturaStringValue">
								<value>{to_email_admin}</value>
							</email>
							<name objectType="KalturaStringValue">
								<value>{to_email_admin}</value>
							</name>					
						</item>
						<item objectType = "KalturaEmailNotificationRecipient">
							<email objectType="KalturaStringValue">
								<value>{to_email_user}</value>
							</email>
							<name objectType="KalturaStringValue">
								<value>{to_email_user}</value>
							</name>
						</item>
					</emailRecipients>
				</to>
				<contentParameters objectType="array">
					<item objectType="KalturaEventNotificationParameter">
						<key>job_id</key>
						<description>Batch Job ID</description>
						<value objectType="KalturaEvalStringField">
							<code>$scope->getEvent()->getBatchJob()->getId()</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>log_url</key>
						<description>Bulk upload log url</description>
						<value objectType="KalturaEvalStringField">
							<code>kFlowHelper::createBulkUploadLogUrl($scope->getEvent()->getBatchJob())</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>date_time</key>
						<description>Bulk upload creation time</description>
						<value objectType="KalturaEvalStringField">
							<code>$scope->getEvent()->getBatchJob()->getCreatedAt()</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>from_email</key>
						<description>Sender email</description>
						<value objectType="KalturaEvalStringField">
							<code>kConf::get("batch_alert_email")</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>from_name</key>
						<description>Sender name</description>
						<value objectType="KalturaEvalStringField">
							<code>kConf::get("batch_alert_name")</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>to_email_admin</key>
						<description>Recepient admin email</description>
						<value objectType="KalturaEvalStringField">
							<code>$scope->getEvent()->getBatchJob()->getPartner()->getAdminEmail()</code>
						</value>
					</item>	
					<item objectType="KalturaEventNotificationParameter">
						<key>to_email_user</key>
						<description>Recepient user email</description>
						<value objectType="KalturaEvalStringField">
							<code>kuserPeer::getKuserByPartnerAndUid($scope->getPartnerId(), $scope->getEvent()->getBatchJob()->getData()->getUserId())->getEmail()</code>
						</value>
					</item>	
				</contentParameters>
			</template>
		</request>
		<request service="eventNotificationTemplate" action="updateStatus" plugin="eventNotification" partnerId="0">
			<id>{1:result:id}</id>
			<status>1</status><!-- EventNotificationTemplateStatus::DISABLED -->
		</request>
	</multirequest>
	<multirequest>
		<request service="eventNotificationTemplate" action="add" plugin="eventNotification" partnerId="0">
			<template objectType="KalturaEmailNotificationTemplate">
				<name>Media XML - Bulk Job Failed</name>
				<systemName>Media_XML_Bulk_Failure_Notification</systemName>
				<description>Email notification template for Media XML Bulk Upload failure.</description>
				<automaticDispatchEnabled>1</automaticDispatchEnabled>
				<eventType>1</eventType> 
				<eventObjectType>10</eventObjectType>
				<eventConditions objectType="array">
					<item objectType="KalturaEventFieldCondition">
						<description>Batch job of type Bulk Upload</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getJobType() == BatchJobType::BULKUPLOAD</code>
						</field>
					</item>
					<item objectType="KalturaEventFieldCondition">
						<description>Bulk Upload type CSV</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getJobSubType() == BulkUploadXmlPlugin::getBulkUploadTypeCoreValue(BulkUploadXmlType::XML)</code>
						</field>
					</item>
					<item objectType="KalturaEventFieldCondition">
						<description>Media object uploaded</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getData()->getBulkUploadObjectType() == BulkUploadObjectType::ENTRY</code>
						</field>
					</item>
					<item objectType="KalturaEventFieldCondition">
						<description>Bulk Upload failed</description>
						<field objectType="KalturaEvalBooleanField">
							<code>$scope->getEvent()->getBatchJob()->getStatus() == BatchJob::BATCHJOB_STATUS_FAILED</code>
						</field>
					</item>
				</eventConditions>
				<format>1</format>
				<subject>Media XML - Bulk Job Failed</subject>
				<body><![CDATA[ Hello,<p>The processing of your bulk job has failed.</p><p>Bulk Job ID = {job_id} <br>Job Submission Date/Time:  {date_time}</p><p>More details are available in the log file, at: <a href={log_url}>{log_url}</a></p><p>Kaltura Customer Service</p>]]></body>
				<fromEmail>{from_email}</fromEmail>
				<fromName>{from_name}</fromName>
				<to objectType="KalturaEmailNotificationStaticRecipientProvider">
					<emailRecipients objectType="array">
						<item objectType = "KalturaEmailNotificationRecipient">
							<email objectType="KalturaStringValue">
								<value>{to_email_admin}</value>
							</email>
							<name objectType="KalturaStringValue">
								<value>{to_email_admin}</value>
							</name>
						</item>
						<item objectType = "KalturaEmailNotificationRecipient">
							<email objectType="KalturaStringValue">
								<value>{to_email_user}</value>
							</email>
							<name objectType="KalturaStringValue">
								<value>{to_email_user}</value>
							</name>
						</item>
					</emailRecipients>
				</to>
				<contentParameters objectType="array">
					<item objectType="KalturaEventNotificationParameter">
						<key>job_id</key>
						<description>Batch Job ID</description>
						<value objectType="KalturaEvalStringField">
							<code>$scope->getEvent()->getBatchJob()->getId()</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>log_url</key>
						<description>Bulk upload log url</description>
						<value objectType="KalturaEvalStringField">
							<code>kFlowHelper::createBulkUploadLogUrl($scope->getEvent()->getBatchJob())</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>date_time</key>
						<description>Bulk upload creation time</description>
						<value objectType="KalturaEvalStringField">
							<code>$scope->getEvent()->getBatchJob()->getCreatedAt()</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>from_email</key>
						<description>Sender email</description>
						<value objectType="KalturaEvalStringField">
							<code>kConf::get("batch_alert_email")</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>from_name</key>
						<description>Sender name</description>
						<value objectType="KalturaEvalStringField">
							<code>kConf::get("batch_alert_name")</code>
						</value>
					</item>
					<item objectType="KalturaEventNotificationParameter">
						<key>to_email_admin</key>
						<description>Recepient admin email</description>
						<value objectType="KalturaEvalStringField">
							<code>$scope->getEvent()->getBatchJob()->getPartner()->getAdminEmail()</code>
						</value>
					</item>	
					<item objectType="KalturaEventNotificationParameter">
						<key>to_email_user</key>
						<description>Recepient user email</description>
						<value objectType="KalturaEvalStringField">
							<code>kuserPeer::getKuserByPartnerAndUid($scope->getPartnerId(), $scope->getEvent()->getBatchJob()->getData()->getUserId())->getEmail()</code>
						</value>
					</item>	
				</contentParameters>
			</template>
		</request>
		<request service="eventNotificationTemplate" action="updateStatus" plugin="eventNotification" partnerId="0">
			<id>{1:result:id}</id>
			<status>1</status><!-- EventNotificationTemplateStatus::DISABLED -->
		</request>
	</multirequest>
</xml>
